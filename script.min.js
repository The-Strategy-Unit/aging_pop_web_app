!function(){"use strict";var t="http://www.w3.org/1999/xhtml",e={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function n(t){var n=t+="",a=n.indexOf(":");return a>=0&&"xmlns"!==(n=t.slice(0,a))&&(t=t.slice(a+1)),e.hasOwnProperty(n)?{space:e[n],local:t}:t}function a(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(a,e)}}function r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t){var e=n(t);return(e.local?r:a)(e)}function s(){}function o(t){return null==t?s:function(){return this.querySelector(t)}}function l(){return[]}function c(t){return null==t?l:function(){return this.querySelectorAll(t)}}function u(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function d(t){return function(){return this.matches(t)}}function f(t){return function(e){return e.matches(t)}}var h=Array.prototype.find;function p(){return this.firstElementChild}var _=Array.prototype.filter;function g(){return Array.from(this.children)}function m(t){return new Array(t.length)}function b(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function w(t,e,n,a,r,i){for(var s,o=0,l=e.length,c=i.length;o<c;++o)(s=e[o])?(s.__data__=i[o],a[o]=s):n[o]=new b(t,i[o]);for(;o<l;++o)(s=e[o])&&(r[o]=s)}function y(t,e,n,a,r,i,s){var o,l,c,u=new Map,d=e.length,f=i.length,h=new Array(d);for(o=0;o<d;++o)(l=e[o])&&(h[o]=c=s.call(l,l.__data__,o,e)+"",u.has(c)?r[o]=l:u.set(c,l));for(o=0;o<f;++o)c=s.call(t,i[o],o,i)+"",(l=u.get(c))?(a[o]=l,l.__data__=i[o],u.delete(c)):n[o]=new b(t,i[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(h[o])===l&&(r[o]=l)}function v(t){return t.__data__}function x(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function k(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function A(t){return function(){this.removeAttribute(t)}}function z(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $(t,e){return function(){this.setAttribute(t,e)}}function M(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function E(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function N(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function S(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function R(t){return function(){this.style.removeProperty(t)}}function C(t,e,n){return function(){this.style.setProperty(t,e,n)}}function T(t,e,n){return function(){var a=e.apply(this,arguments);null==a?this.style.removeProperty(t):this.style.setProperty(t,a,n)}}function D(t,e){return t.style.getPropertyValue(e)||S(t).getComputedStyle(t,null).getPropertyValue(e)}function O(t){return function(){delete this[t]}}function Z(t,e){return function(){this[t]=e}}function U(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function L(t){return t.trim().split(/^|\s+/)}function I(t){return t.classList||new F(t)}function F(t){this._node=t,this._names=L(t.getAttribute("class")||"")}function j(t,e){for(var n=I(t),a=-1,r=e.length;++a<r;)n.add(e[a])}function B(t,e){for(var n=I(t),a=-1,r=e.length;++a<r;)n.remove(e[a])}function P(t){return function(){j(this,t)}}function Y(t){return function(){B(this,t)}}function H(t,e){return function(){(e.apply(this,arguments)?j:B)(this,t)}}function q(){this.textContent=""}function X(t){return function(){this.textContent=t}}function K(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function W(){this.innerHTML=""}function V(t){return function(){this.innerHTML=t}}function G(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function J(){this.nextSibling&&this.parentNode.appendChild(this)}function Q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tt(){return null}function et(){var t=this.parentNode;t&&t.removeChild(this)}function nt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function at(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rt(t){return function(){var e=this.__on;if(e){for(var n,a=0,r=-1,i=e.length;a<i;++a)n=e[a],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function it(t,e,n){return function(){var a,r=this.__on,i=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,o=r.length;s<o;++s)if((a=r[s]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=n),void(a.value=e);this.addEventListener(t.type,i,n),a={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(a):this.__on=[a]}}function st(t,e,n){var a=S(t),r=a.CustomEvent;"function"==typeof r?r=new r(e,n):(r=a.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ot(t,e){return function(){return st(this,t,e)}}function lt(t,e){return function(){return st(this,t,e.apply(this,arguments))}}b.prototype={constructor:b,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},F.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ct=[null];function ut(t,e){this._groups=t,this._parents=e}function dt(){return new ut([[document.documentElement]],ct)}function ft(t){return"string"==typeof t?new ut([[document.querySelector(t)]],[document.documentElement]):new ut([[t]],ct)}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */ut.prototype=dt.prototype={constructor:ut,select:function(t){"function"!=typeof t&&(t=o(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var i,s,l=e[r],c=l.length,u=a[r]=new Array(c),d=0;d<c;++d)(i=l[d])&&(s=t.call(i,i.__data__,d,l))&&("__data__"in i&&(s.__data__=i.__data__),u[d]=s);return new ut(a,this._parents)},selectAll:function(t){t="function"==typeof t?u(t):c(t);for(var e=this._groups,n=e.length,a=[],r=[],i=0;i<n;++i)for(var s,o=e[i],l=o.length,d=0;d<l;++d)(s=o[d])&&(a.push(t.call(s,s.__data__,d,o)),r.push(s));return new ut(a,r)},selectChild:function(t){return this.select(null==t?p:function(t){return function(){return h.call(this.children,t)}}("function"==typeof t?t:f(t)))},selectChildren:function(t){return this.selectAll(null==t?g:function(t){return function(){return _.call(this.children,t)}}("function"==typeof t?t:f(t)))},filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var i,s=e[r],o=s.length,l=a[r]=[],c=0;c<o;++c)(i=s[c])&&t.call(i,i.__data__,c,s)&&l.push(i);return new ut(a,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,v);var n=e?y:w,a=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var i=r.length,s=new Array(i),o=new Array(i),l=new Array(i),c=0;c<i;++c){var u=a[c],d=r[c],f=d.length,h=x(t.call(u,u&&u.__data__,c,a)),p=h.length,_=o[c]=new Array(p),g=s[c]=new Array(p);n(u,d,_,g,l[c]=new Array(f),h,e);for(var m,b,k=0,A=0;k<p;++k)if(m=_[k]){for(k>=A&&(A=k+1);!(b=g[A])&&++A<p;);m._next=b||null}}return(s=new ut(s,a))._enter=o,s._exit=l,s},enter:function(){return new ut(this._enter||this._groups.map(m),this._parents)},exit:function(){return new ut(this._exit||this._groups.map(m),this._parents)},join:function(t,e,n){var a=this.enter(),r=this,i=this.exit();return"function"==typeof t?(a=t(a))&&(a=a.selection()):a=a.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?i.remove():n(i),a&&r?a.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,a=e._groups,r=n.length,i=a.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var c,u=n[l],d=a[l],f=u.length,h=o[l]=new Array(f),p=0;p<f;++p)(c=u[p]||d[p])&&(h[p]=c);for(;l<r;++l)o[l]=n[l];return new ut(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var a,r=t[e],i=r.length-1,s=r[i];--i>=0;)(a=r[i])&&(s&&4^a.compareDocumentPosition(s)&&s.parentNode.insertBefore(a,s),s=a);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=k);for(var n=this._groups,a=n.length,r=new Array(a),i=0;i<a;++i){for(var s,o=n[i],l=o.length,c=r[i]=new Array(l),u=0;u<l;++u)(s=o[u])&&(c[u]=s);c.sort(e)}return new ut(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],r=0,i=a.length;r<i;++r){var s=a[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var r,i=e[n],s=0,o=i.length;s<o;++s)(r=i[s])&&t.call(r,r.__data__,s,i);return this},attr:function(t,e){var a=n(t);if(arguments.length<2){var r=this.node();return a.local?r.getAttributeNS(a.space,a.local):r.getAttribute(a)}return this.each((null==e?a.local?z:A:"function"==typeof e?a.local?N:E:a.local?M:$)(a,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?R:"function"==typeof e?T:C)(t,e,null==n?"":n)):D(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?O:"function"==typeof e?U:Z)(t,e)):this.node()[t]},classed:function(t,e){var n=L(t+"");if(arguments.length<2){for(var a=I(this.node()),r=-1,i=n.length;++r<i;)if(!a.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?H:e?P:Y)(n,e))},text:function(t){return arguments.length?this.each(null==t?q:("function"==typeof t?K:X)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?W:("function"==typeof t?G:V)(t)):this.node().innerHTML},raise:function(){return this.each(J)},lower:function(){return this.each(Q)},append:function(t){var e="function"==typeof t?t:i(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:i(t),a=null==e?tt:"function"==typeof e?e:o(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)}))},remove:function(){return this.each(et)},clone:function(t){return this.select(t?at:nt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var a,r,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=i.length;if(!(arguments.length<2)){for(o=e?it:rt,a=0;a<s;++a)this.each(o(i[a],e,n));return this}var o=this.node().__on;if(o)for(var l,c=0,u=o.length;c<u;++c)for(a=0,l=o[c];a<s;++a)if((r=i[a]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?lt:ot)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a,r=t[e],i=0,s=r.length;i<s;++i)(a=r[i])&&(yield a)}};function ht(t){let e=t.length;for(;--e>=0;)t[e]=0}const pt=256,_t=286,gt=30,mt=15,bt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),wt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),yt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),vt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xt=new Array(576);ht(xt);const kt=new Array(60);ht(kt);const At=new Array(512);ht(At);const zt=new Array(256);ht(zt);const $t=new Array(29);ht($t);const Mt=new Array(gt);function Et(t,e,n,a,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=t&&t.length}let Nt,St,Rt;function Ct(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}ht(Mt);const Tt=t=>t<256?At[t]:At[256+(t>>>7)],Dt=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},Ot=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,Dt(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},Zt=(t,e,n)=>{Ot(t,n[2*e],n[2*e+1])},Ut=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},Lt=(t,e,n)=>{const a=new Array(16);let r,i,s=0;for(r=1;r<=mt;r++)s=s+n[r-1]<<1,a[r]=s;for(i=0;i<=e;i++){let e=t[2*i+1];0!==e&&(t[2*i]=Ut(a[e]++,e))}},It=t=>{let e;for(e=0;e<_t;e++)t.dyn_ltree[2*e]=0;for(e=0;e<gt;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Ft=t=>{t.bi_valid>8?Dt(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},jt=(t,e,n,a)=>{const r=2*e,i=2*n;return t[r]<t[i]||t[r]===t[i]&&a[e]<=a[n]},Bt=(t,e,n)=>{const a=t.heap[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&jt(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!jt(e,a,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=a},Pt=(t,e,n)=>{let a,r,i,s,o=0;if(0!==t.sym_next)do{a=255&t.pending_buf[t.sym_buf+o++],a+=(255&t.pending_buf[t.sym_buf+o++])<<8,r=t.pending_buf[t.sym_buf+o++],0===a?Zt(t,r,e):(i=zt[r],Zt(t,i+pt+1,e),s=bt[i],0!==s&&(r-=$t[i],Ot(t,r,s)),a--,i=Tt(a),Zt(t,i,n),s=wt[i],0!==s&&(a-=Mt[i],Ot(t,a,s)))}while(o<t.sym_next);Zt(t,256,e)},Yt=(t,e)=>{const n=e.dyn_tree,a=e.stat_desc.static_tree,r=e.stat_desc.has_stree,i=e.stat_desc.elems;let s,o,l,c=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<i;s++)0!==n[2*s]?(t.heap[++t.heap_len]=c=s,t.depth[s]=0):n[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=a[2*l+1]);for(e.max_code=c,s=t.heap_len>>1;s>=1;s--)Bt(t,n,s);l=i;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Bt(t,n,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,n[2*l]=n[2*s]+n[2*o],t.depth[l]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,n[2*s+1]=n[2*o+1]=l,t.heap[1]=l++,Bt(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,a=e.max_code,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,u,d,f,h,p,_=0;for(f=0;f<=mt;f++)t.bl_count[f]=0;for(n[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)u=t.heap[c],f=n[2*n[2*u+1]+1]+1,f>l&&(f=l,_++),n[2*u+1]=f,u>a||(t.bl_count[f]++,h=0,u>=o&&(h=s[u-o]),p=n[2*u],t.opt_len+=p*(f+h),i&&(t.static_len+=p*(r[2*u+1]+h)));if(0!==_){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,_-=2}while(_>0);for(f=l;0!==f;f--)for(u=t.bl_count[f];0!==u;)d=t.heap[--c],d>a||(n[2*d+1]!==f&&(t.opt_len+=(f-n[2*d+1])*n[2*d],n[2*d+1]=f),u--)}})(t,e),Lt(n,c,t.bl_count)},Ht=(t,e,n)=>{let a,r,i=-1,s=e[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),e[2*(n+1)+1]=65535,a=0;a<=n;a++)r=s,s=e[2*(a+1)+1],++o<l&&r===s||(o<c?t.bl_tree[2*r]+=o:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,i=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))},qt=(t,e,n)=>{let a,r,i=-1,s=e[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),a=0;a<=n;a++)if(r=s,s=e[2*(a+1)+1],!(++o<l&&r===s)){if(o<c)do{Zt(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==i&&(Zt(t,r,t.bl_tree),o--),Zt(t,16,t.bl_tree),Ot(t,o-3,2)):o<=10?(Zt(t,17,t.bl_tree),Ot(t,o-3,3)):(Zt(t,18,t.bl_tree),Ot(t,o-11,7));o=0,i=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}};let Xt=!1;const Kt=(t,e,n,a)=>{Ot(t,0+(a?1:0),3),Ft(t),Dt(t,n),Dt(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};var Wt=(t,e,n,a)=>{let r,i,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<pt;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),Yt(t,t.l_desc),Yt(t,t.d_desc),s=(t=>{let e;for(Ht(t,t.dyn_ltree,t.l_desc.max_code),Ht(t,t.dyn_dtree,t.d_desc.max_code),Yt(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*vt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=r&&(r=i)):r=i=n+5,n+4<=r&&-1!==e?Kt(t,e,n,a):4===t.strategy||i===r?(Ot(t,2+(a?1:0),3),Pt(t,xt,kt)):(Ot(t,4+(a?1:0),3),((t,e,n,a)=>{let r;for(Ot(t,e-257,5),Ot(t,n-1,5),Ot(t,a-4,4),r=0;r<a;r++)Ot(t,t.bl_tree[2*vt[r]+1],3);qt(t,t.dyn_ltree,e-1),qt(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Pt(t,t.dyn_ltree,t.dyn_dtree)),It(t),a&&Ft(t)},Vt={_tr_init:t=>{Xt||((()=>{let t,e,n,a,r;const i=new Array(16);for(n=0,a=0;a<28;a++)for($t[a]=n,t=0;t<1<<bt[a];t++)zt[n++]=a;for(zt[n-1]=a,r=0,a=0;a<16;a++)for(Mt[a]=r,t=0;t<1<<wt[a];t++)At[r++]=a;for(r>>=7;a<gt;a++)for(Mt[a]=r<<7,t=0;t<1<<wt[a]-7;t++)At[256+r++]=a;for(e=0;e<=mt;e++)i[e]=0;for(t=0;t<=143;)xt[2*t+1]=8,t++,i[8]++;for(;t<=255;)xt[2*t+1]=9,t++,i[9]++;for(;t<=279;)xt[2*t+1]=7,t++,i[7]++;for(;t<=287;)xt[2*t+1]=8,t++,i[8]++;for(Lt(xt,287,i),t=0;t<gt;t++)kt[2*t+1]=5,kt[2*t]=Ut(t,5);Nt=new Et(xt,bt,257,_t,mt),St=new Et(kt,wt,0,gt,mt),Rt=new Et(new Array(0),yt,0,19,7)})(),Xt=!0),t.l_desc=new Ct(t.dyn_ltree,Nt),t.d_desc=new Ct(t.dyn_dtree,St),t.bl_desc=new Ct(t.bl_tree,Rt),t.bi_buf=0,t.bi_valid=0,It(t)},_tr_stored_block:Kt,_tr_flush_block:Wt,_tr_tally:(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(zt[n]+pt+1)]++,t.dyn_dtree[2*Tt(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{Ot(t,2,3),Zt(t,256,xt),(t=>{16===t.bi_valid?(Dt(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var Gt=(t,e,n,a)=>{let r=65535&t,i=t>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{r=r+e[a++]|0,i=i+r|0}while(--s);r%=65521,i%=65521}return r|i<<16};const Jt=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var a=0;a<8;a++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var Qt=(t,e,n,a)=>{const r=Jt,i=a+n;t^=-1;for(let n=a;n<i;n++)t=t>>>8^r[255&(t^e[n])];return~t},te={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ee={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ne,_tr_stored_block:ae,_tr_flush_block:re,_tr_tally:ie,_tr_align:se}=Vt,{Z_NO_FLUSH:oe,Z_PARTIAL_FLUSH:le,Z_FULL_FLUSH:ce,Z_FINISH:ue,Z_BLOCK:de,Z_OK:fe,Z_STREAM_END:he,Z_STREAM_ERROR:pe,Z_DATA_ERROR:_e,Z_BUF_ERROR:ge,Z_DEFAULT_COMPRESSION:me,Z_FILTERED:be,Z_HUFFMAN_ONLY:we,Z_RLE:ye,Z_FIXED:ve,Z_DEFAULT_STRATEGY:xe,Z_UNKNOWN:ke,Z_DEFLATED:Ae}=ee,ze=258,$e=262,Me=42,Ee=113,Ne=666,Se=(t,e)=>(t.msg=te[e],e),Re=t=>2*t-(t>4?9:0),Ce=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Te=t=>{let e,n,a,r=t.w_size;e=t.hash_size,a=e;do{n=t.head[--a],t.head[a]=n>=r?n-r:0}while(--e);e=r,a=e;do{n=t.prev[--a],t.prev[a]=n>=r?n-r:0}while(--e)};let De=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const Oe=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},Ze=(t,e)=>{re(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Oe(t.strm)},Ue=(t,e)=>{t.pending_buf[t.pending++]=e},Le=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Ie=(t,e,n,a)=>{let r=t.avail_in;return r>a&&(r=a),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),n),1===t.state.wrap?t.adler=Gt(t.adler,e,r,n):2===t.state.wrap&&(t.adler=Qt(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)},Fe=(t,e)=>{let n,a,r=t.max_chain_length,i=t.strstart,s=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-$e?t.strstart-(t.w_size-$e):0,c=t.window,u=t.w_mask,d=t.prev,f=t.strstart+ze;let h=c[i+s-1],p=c[i+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(n=e,c[n+s]===p&&c[n+s-1]===h&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(a=ze-(f-i),i=f-ze,a>s){if(t.match_start=e,s=a,a>=o)break;h=c[i+s-1],p=c[i+s]}}}while((e=d[e&u])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},je=t=>{const e=t.w_size;let n,a,r;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-$e)&&(t.window.set(t.window.subarray(e,e+e-a),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Te(t),a+=e),0===t.strm.avail_in)break;if(n=Ie(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=n,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=De(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=De(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<$e&&0!==t.strm.avail_in)},Be=(t,e)=>{let n,a,r,i=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s=0,o=t.strm.avail_in;do{if(n=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r)break;if(r=t.strm.avail_out-r,a=t.strstart-t.block_start,n>a+t.strm.avail_in&&(n=a+t.strm.avail_in),n>r&&(n=r),n<i&&(0===n&&e!==ue||e===oe||n!==a+t.strm.avail_in))break;s=e===ue&&n===a+t.strm.avail_in?1:0,ae(t,0,0,s),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,Oe(t.strm),a&&(a>n&&(a=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+a),t.strm.next_out),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a,t.block_start+=a,n-=a),n&&(Ie(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===s);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?4:e!==oe&&e!==ue&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(Ie(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r,i=r>t.w_size?t.w_size:r,a=t.strstart-t.block_start,(a>=i||(a||e===ue)&&e!==oe&&0===t.strm.avail_in&&a<=r)&&(n=a>r?r:a,s=e===ue&&0===t.strm.avail_in&&n===a?1:0,ae(t,t.block_start,n,s),t.block_start+=n,Oe(t.strm)),s?3:1)},Pe=(t,e)=>{let n,a;for(;;){if(t.lookahead<$e){if(je(t),t.lookahead<$e&&e===oe)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=De(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-$e&&(t.match_length=Fe(t,n)),t.match_length>=3)if(a=ie(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=De(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=De(t,t.ins_h,t.window[t.strstart+1]);else a=ie(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(Ze(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===ue?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2},Ye=(t,e)=>{let n,a,r;for(;;){if(t.lookahead<$e){if(je(t),t.lookahead<$e&&e===oe)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=De(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-$e&&(t.match_length=Fe(t,n),t.match_length<=5&&(t.strategy===be||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,a=ie(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=De(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,a&&(Ze(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(a=ie(t,0,t.window[t.strstart-1]),a&&Ze(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=ie(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===ue?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2};function He(t,e,n,a,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=a,this.func=r}const qe=[new He(0,0,0,0,Be),new He(4,4,8,4,Pe),new He(4,5,16,8,Pe),new He(4,6,32,32,Pe),new He(4,4,16,16,Ye),new He(8,16,32,32,Ye),new He(8,16,128,128,Ye),new He(8,32,128,256,Ye),new He(32,128,258,1024,Ye),new He(32,258,258,4096,Ye)];function Xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ae,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ce(this.dyn_ltree),Ce(this.dyn_dtree),Ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ce(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ke=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Me&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==Ee&&e.status!==Ne?1:0},We=t=>{if(Ke(t))return Se(t,pe);t.total_in=t.total_out=0,t.data_type=ke;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?Me:Ee,t.adler=2===e.wrap?0:1,e.last_flush=-2,ne(e),fe},Ve=t=>{const e=We(t);var n;return e===fe&&((n=t.state).window_size=2*n.w_size,Ce(n.head),n.max_lazy_match=qe[n.level].max_lazy,n.good_match=qe[n.level].good_length,n.nice_match=qe[n.level].nice_length,n.max_chain_length=qe[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},Ge=(t,e,n,a,r,i)=>{if(!t)return pe;let s=1;if(e===me&&(e=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),r<1||r>9||n!==Ae||a<8||a>15||e<0||e>9||i<0||i>ve||8===a&&1!==s)return Se(t,pe);8===a&&(a=9);const o=new Xe;return t.state=o,o.strm=t,o.status=Me,o.wrap=s,o.gzhead=null,o.w_bits=a,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=i,o.method=n,Ve(t)};var Je=(t,e)=>{if(Ke(t)||e>de||e<0)return t?Se(t,pe):pe;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===Ne&&e!==ue)return Se(t,0===t.avail_out?ge:pe);const a=n.last_flush;if(n.last_flush=e,0!==n.pending){if(Oe(t),0===t.avail_out)return n.last_flush=-1,fe}else if(0===t.avail_in&&Re(e)<=Re(a)&&e!==ue)return Se(t,ge);if(n.status===Ne&&0!==t.avail_in)return Se(t,ge);if(n.status===Me&&0===n.wrap&&(n.status=Ee),n.status===Me){let e=Ae+(n.w_bits-8<<4)<<8,a=-1;if(a=n.strategy>=we||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=a<<6,0!==n.strstart&&(e|=32),e+=31-e%31,Le(n,e),0!==n.strstart&&(Le(n,t.adler>>>16),Le(n,65535&t.adler)),t.adler=1,n.status=Ee,Oe(t),0!==n.pending)return n.last_flush=-1,fe}if(57===n.status)if(t.adler=0,Ue(n,31),Ue(n,139),Ue(n,8),n.gzhead)Ue(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ue(n,255&n.gzhead.time),Ue(n,n.gzhead.time>>8&255),Ue(n,n.gzhead.time>>16&255),Ue(n,n.gzhead.time>>24&255),Ue(n,9===n.level?2:n.strategy>=we||n.level<2?4:0),Ue(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Ue(n,255&n.gzhead.extra.length),Ue(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Qt(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Ue(n,0),Ue(n,0),Ue(n,0),Ue(n,0),Ue(n,0),Ue(n,9===n.level?2:n.strategy>=we||n.level<2?4:0),Ue(n,3),n.status=Ee,Oe(t),0!==n.pending)return n.last_flush=-1,fe;if(69===n.status){if(n.gzhead.extra){let e=n.pending,a=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=Qt(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=r,Oe(t),0!==n.pending)return n.last_flush=-1,fe;e=0,a-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>e&&(t.adler=Qt(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(t.adler=Qt(t.adler,n.pending_buf,n.pending-a,a)),Oe(t),0!==n.pending)return n.last_flush=-1,fe;a=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Ue(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>a&&(t.adler=Qt(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(t.adler=Qt(t.adler,n.pending_buf,n.pending-a,a)),Oe(t),0!==n.pending)return n.last_flush=-1,fe;a=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Ue(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>a&&(t.adler=Qt(t.adler,n.pending_buf,n.pending-a,a))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Oe(t),0!==n.pending))return n.last_flush=-1,fe;Ue(n,255&t.adler),Ue(n,t.adler>>8&255),t.adler=0}if(n.status=Ee,Oe(t),0!==n.pending)return n.last_flush=-1,fe}if(0!==t.avail_in||0!==n.lookahead||e!==oe&&n.status!==Ne){let a=0===n.level?Be(n,e):n.strategy===we?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(je(t),0===t.lookahead)){if(e===oe)return 1;break}if(t.match_length=0,n=ie(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Ze(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ue?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===ye?((t,e)=>{let n,a,r,i;const s=t.window;for(;;){if(t.lookahead<=ze){if(je(t),t.lookahead<=ze&&e===oe)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,a=s[r],a===s[++r]&&a===s[++r]&&a===s[++r])){i=t.strstart+ze;do{}while(a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&r<i);t.match_length=ze-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=ie(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=ie(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Ze(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ue?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2})(n,e):qe[n.level].func(n,e);if(3!==a&&4!==a||(n.status=Ne),1===a||3===a)return 0===t.avail_out&&(n.last_flush=-1),fe;if(2===a&&(e===le?se(n):e!==de&&(ae(n,0,0,!1),e===ce&&(Ce(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Oe(t),0===t.avail_out))return n.last_flush=-1,fe}return e!==ue?fe:n.wrap<=0?he:(2===n.wrap?(Ue(n,255&t.adler),Ue(n,t.adler>>8&255),Ue(n,t.adler>>16&255),Ue(n,t.adler>>24&255),Ue(n,255&t.total_in),Ue(n,t.total_in>>8&255),Ue(n,t.total_in>>16&255),Ue(n,t.total_in>>24&255)):(Le(n,t.adler>>>16),Le(n,65535&t.adler)),Oe(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?fe:he)},Qe={deflateInit:(t,e)=>Ge(t,e,Ae,15,8,xe),deflateInit2:Ge,deflateReset:Ve,deflateResetKeep:We,deflateSetHeader:(t,e)=>Ke(t)||2!==t.state.wrap?pe:(t.state.gzhead=e,fe),deflate:Je,deflateEnd:t=>{if(Ke(t))return pe;const e=t.state.status;return t.state=null,e===Ee?Se(t,_e):fe},deflateSetDictionary:(t,e)=>{let n=e.length;if(Ke(t))return pe;const a=t.state,r=a.wrap;if(2===r||1===r&&a.status!==Me||a.lookahead)return pe;if(1===r&&(t.adler=Gt(t.adler,e,n,0)),a.wrap=0,n>=a.w_size){0===r&&(Ce(a.head),a.strstart=0,a.block_start=0,a.insert=0);let t=new Uint8Array(a.w_size);t.set(e.subarray(n-a.w_size,n),0),e=t,n=a.w_size}const i=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,je(a);a.lookahead>=3;){let t=a.strstart,e=a.lookahead-2;do{a.ins_h=De(a,a.ins_h,a.window[t+3-1]),a.prev[t&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=t,t++}while(--e);a.strstart=t,a.lookahead=2,je(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,t.next_in=s,t.input=o,t.avail_in=i,a.wrap=r,fe},deflateInfo:"pako deflate (from Nodeca project)"};const tn=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var en={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)tn(n,e)&&(t[e]=n[e])}}return t},flattenChunks:t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,a=0,r=t.length;e<r;e++){let r=t[e];n.set(r,a),a+=r.length}return n}};let nn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){nn=!1}const an=new Uint8Array(256);for(let t=0;t<256;t++)an[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;an[254]=an[254]=1;var rn={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,a,r,i,s=t.length,o=0;for(r=0;r<s;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(a=t.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),i=0,r=0;i<o;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(a=t.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|63&n):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|63&n):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|63&n);return e},buf2string:(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let a,r;const i=new Array(2*n);for(r=0,a=0;a<n;){let e=t[a++];if(e<128){i[r++]=e;continue}let s=an[e];if(s>4)i[r++]=65533,a+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&a<n;)e=e<<6|63&t[a++],s--;s>1?i[r++]=65533:e<65536?i[r++]=e:(e-=65536,i[r++]=55296|e>>10&1023,i[r++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&nn)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n})(i,r)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+an[t[n]]>e?n:e}};var sn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const on=Object.prototype.toString,{Z_NO_FLUSH:ln,Z_SYNC_FLUSH:cn,Z_FULL_FLUSH:un,Z_FINISH:dn,Z_OK:fn,Z_STREAM_END:hn,Z_DEFAULT_COMPRESSION:pn,Z_DEFAULT_STRATEGY:_n,Z_DEFLATED:gn}=ee;function mn(t){this.options=en.assign({level:pn,method:gn,chunkSize:16384,windowBits:15,memLevel:8,strategy:_n},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sn,this.strm.avail_out=0;let n=Qe.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==fn)throw new Error(te[n]);if(e.header&&Qe.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?rn.string2buf(e.dictionary):"[object ArrayBuffer]"===on.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Qe.deflateSetDictionary(this.strm,t),n!==fn)throw new Error(te[n]);this._dict_set=!0}}function bn(t,e){const n=new mn(e);if(n.push(t,!0),n.err)throw n.msg||te[n.err];return n.result}mn.prototype.push=function(t,e){const n=this.strm,a=this.options.chunkSize;let r,i;if(this.ended)return!1;for(i=e===~~e?e:!0===e?dn:ln,"string"==typeof t?n.input=rn.string2buf(t):"[object ArrayBuffer]"===on.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(i===cn||i===un)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Qe.deflate(n,i),r===hn)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Qe.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===fn;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},mn.prototype.onData=function(t){this.chunks.push(t)},mn.prototype.onEnd=function(t){t===fn&&(this.result=en.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var wn=function(t,e){return(e=e||{}).raw=!0,bn(t,e)},yn=function(t,e){return(e=e||{}).gzip=!0,bn(t,e)},vn={Deflate:mn,deflate:bn,deflateRaw:wn,gzip:yn,constants:ee};const xn=16209;var kn=function(t,e){let n,a,r,i,s,o,l,c,u,d,f,h,p,_,g,m,b,w,y,v,x,k,A,z;const $=t.state;n=t.next_in,A=t.input,a=n+(t.avail_in-5),r=t.next_out,z=t.output,i=r-(e-t.avail_out),s=r+(t.avail_out-257),o=$.dmax,l=$.wsize,c=$.whave,u=$.wnext,d=$.window,f=$.hold,h=$.bits,p=$.lencode,_=$.distcode,g=(1<<$.lenbits)-1,m=(1<<$.distbits)-1;t:do{h<15&&(f+=A[n++]<<h,h+=8,f+=A[n++]<<h,h+=8),b=p[f&g];e:for(;;){if(w=b>>>24,f>>>=w,h-=w,w=b>>>16&255,0===w)z[r++]=65535&b;else{if(!(16&w)){if(64&w){if(32&w){$.mode=16191;break t}t.msg="invalid literal/length code",$.mode=xn;break t}b=p[(65535&b)+(f&(1<<w)-1)];continue e}for(y=65535&b,w&=15,w&&(h<w&&(f+=A[n++]<<h,h+=8),y+=f&(1<<w)-1,f>>>=w,h-=w),h<15&&(f+=A[n++]<<h,h+=8,f+=A[n++]<<h,h+=8),b=_[f&m];;){if(w=b>>>24,f>>>=w,h-=w,w=b>>>16&255,16&w){if(v=65535&b,w&=15,h<w&&(f+=A[n++]<<h,h+=8,h<w&&(f+=A[n++]<<h,h+=8)),v+=f&(1<<w)-1,v>o){t.msg="invalid distance too far back",$.mode=xn;break t}if(f>>>=w,h-=w,w=r-i,v>w){if(w=v-w,w>c&&$.sane){t.msg="invalid distance too far back",$.mode=xn;break t}if(x=0,k=d,0===u){if(x+=l-w,w<y){y-=w;do{z[r++]=d[x++]}while(--w);x=r-v,k=z}}else if(u<w){if(x+=l+u-w,w-=u,w<y){y-=w;do{z[r++]=d[x++]}while(--w);if(x=0,u<y){w=u,y-=w;do{z[r++]=d[x++]}while(--w);x=r-v,k=z}}}else if(x+=u-w,w<y){y-=w;do{z[r++]=d[x++]}while(--w);x=r-v,k=z}for(;y>2;)z[r++]=k[x++],z[r++]=k[x++],z[r++]=k[x++],y-=3;y&&(z[r++]=k[x++],y>1&&(z[r++]=k[x++]))}else{x=r-v;do{z[r++]=z[x++],z[r++]=z[x++],z[r++]=z[x++],y-=3}while(y>2);y&&(z[r++]=z[x++],y>1&&(z[r++]=z[x++]))}break}if(64&w){t.msg="invalid distance code",$.mode=xn;break t}b=_[(65535&b)+(f&(1<<w)-1)]}}break}}while(n<a&&r<s);y=h>>3,n-=y,h-=y<<3,f&=(1<<h)-1,t.next_in=n,t.next_out=r,t.avail_in=n<a?a-n+5:5-(n-a),t.avail_out=r<s?s-r+257:257-(r-s),$.hold=f,$.bits=h};const An=15,zn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Mn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),En=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Nn=(t,e,n,a,r,i,s,o)=>{const l=o.bits;let c,u,d,f,h,p,_=0,g=0,m=0,b=0,w=0,y=0,v=0,x=0,k=0,A=0,z=null;const $=new Uint16Array(16),M=new Uint16Array(16);let E,N,S,R=null;for(_=0;_<=An;_++)$[_]=0;for(g=0;g<a;g++)$[e[n+g]]++;for(w=l,b=An;b>=1&&0===$[b];b--);if(w>b&&(w=b),0===b)return r[i++]=20971520,r[i++]=20971520,o.bits=1,0;for(m=1;m<b&&0===$[m];m++);for(w<m&&(w=m),x=1,_=1;_<=An;_++)if(x<<=1,x-=$[_],x<0)return-1;if(x>0&&(0===t||1!==b))return-1;for(M[1]=0,_=1;_<An;_++)M[_+1]=M[_]+$[_];for(g=0;g<a;g++)0!==e[n+g]&&(s[M[e[n+g]]++]=g);if(0===t?(z=R=s,p=20):1===t?(z=zn,R=$n,p=257):(z=Mn,R=En,p=0),A=0,g=0,_=m,h=i,y=w,v=0,d=-1,k=1<<w,f=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){E=_-v,s[g]+1<p?(N=0,S=s[g]):s[g]>=p?(N=R[s[g]-p],S=z[s[g]-p]):(N=96,S=0),c=1<<_-v,u=1<<y,m=u;do{u-=c,r[h+(A>>v)+u]=E<<24|N<<16|S}while(0!==u);for(c=1<<_-1;A&c;)c>>=1;if(0!==c?(A&=c-1,A+=c):A=0,g++,0==--$[_]){if(_===b)break;_=e[n+s[g]]}if(_>w&&(A&f)!==d){for(0===v&&(v=w),h+=m,y=_-v,x=1<<y;y+v<b&&(x-=$[y+v],!(x<=0));)y++,x<<=1;if(k+=1<<y,1===t&&k>852||2===t&&k>592)return 1;d=A&f,r[d]=w<<24|y<<16|h-i}}return 0!==A&&(r[h+A]=_-v<<24|64<<16),o.bits=w,0};const{Z_FINISH:Sn,Z_BLOCK:Rn,Z_TREES:Cn,Z_OK:Tn,Z_STREAM_END:Dn,Z_NEED_DICT:On,Z_STREAM_ERROR:Zn,Z_DATA_ERROR:Un,Z_MEM_ERROR:Ln,Z_BUF_ERROR:In,Z_DEFLATED:Fn}=ee,jn=16180,Bn=16190,Pn=16191,Yn=16192,Hn=16194,qn=16199,Xn=16200,Kn=16206,Wn=16209,Vn=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Gn(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Jn=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<jn||e.mode>16211?1:0},Qn=t=>{if(Jn(t))return Zn;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=jn,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Tn},ta=t=>{if(Jn(t))return Zn;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Qn(t)},ea=(t,e)=>{let n;if(Jn(t))return Zn;const a=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Zn:(null!==a.window&&a.wbits!==e&&(a.window=null),a.wrap=n,a.wbits=e,ta(t))},na=(t,e)=>{if(!t)return Zn;const n=new Gn;t.state=n,n.strm=t,n.window=null,n.mode=jn;const a=ea(t,e);return a!==Tn&&(t.state=null),a};let aa,ra,ia=!0;const sa=t=>{if(ia){aa=new Int32Array(512),ra=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Nn(1,t.lens,0,288,aa,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Nn(2,t.lens,0,32,ra,0,t.work,{bits:5}),ia=!1}t.lencode=aa,t.lenbits=9,t.distcode=ra,t.distbits=5},oa=(t,e,n,a)=>{let r;const i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(r=i.wsize-i.wnext,r>a&&(r=a),i.window.set(e.subarray(n-a,n-a+r),i.wnext),(a-=r)?(i.window.set(e.subarray(n-a,n),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0};var la=(t,e)=>{let n,a,r,i,s,o,l,c,u,d,f,h,p,_,g,m,b,w,y,v,x,k,A=0;const z=new Uint8Array(4);let $,M;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Jn(t)||!t.output||!t.input&&0!==t.avail_in)return Zn;n=t.state,n.mode===Pn&&(n.mode=Yn),s=t.next_out,r=t.output,l=t.avail_out,i=t.next_in,a=t.input,o=t.avail_in,c=n.hold,u=n.bits,d=o,f=l,k=Tn;t:for(;;)switch(n.mode){case jn:if(0===n.wrap){n.mode=Yn;break}for(;u<16;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,z[0]=255&c,z[1]=c>>>8&255,n.check=Qt(n.check,z,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Wn;break}if((15&c)!==Fn){t.msg="unknown compression method",n.mode=Wn;break}if(c>>>=4,u-=4,x=8+(15&c),0===n.wbits&&(n.wbits=x),x>15||x>n.wbits){t.msg="invalid window size",n.mode=Wn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&c?16189:Pn,c=0,u=0;break;case 16181:for(;u<16;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==Fn){t.msg="unknown compression method",n.mode=Wn;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Wn;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(z[0]=255&c,z[1]=c>>>8&255,n.check=Qt(n.check,z,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(z[0]=255&c,z[1]=c>>>8&255,z[2]=c>>>16&255,z[3]=c>>>24&255,n.check=Qt(n.check,z,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(z[0]=255&c,z[1]=c>>>8&255,n.check=Qt(n.check,z,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(z[0]=255&c,z[1]=c>>>8&255,n.check=Qt(n.check,z,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>o&&(h=o),h&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(i,i+h),x)),512&n.flags&&4&n.wrap&&(n.check=Qt(n.check,a,h,i)),o-=h,i+=h,n.length-=h),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break t;h=0;do{x=a[i+h++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&h<o);if(512&n.flags&&4&n.wrap&&(n.check=Qt(n.check,a,h,i)),o-=h,i+=h,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break t;h=0;do{x=a[i+h++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&h<o);if(512&n.flags&&4&n.wrap&&(n.check=Qt(n.check,a,h,i)),o-=h,i+=h,x)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Wn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Pn;break;case 16189:for(;u<32;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}t.adler=n.check=Vn(c),c=0,u=0,n.mode=Bn;case Bn:if(0===n.havedict)return t.next_out=s,t.avail_out=l,t.next_in=i,t.avail_in=o,n.hold=c,n.bits=u,On;t.adler=n.check=1,n.mode=Pn;case Pn:if(e===Rn||e===Cn)break t;case Yn:if(n.last){c>>>=7&u,u-=7&u,n.mode=Kn;break}for(;u<3;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(sa(n),n.mode=qn,e===Cn){c>>>=2,u-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=Wn}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Wn;break}if(n.length=65535&c,c=0,u=0,n.mode=Hn,e===Cn)break t;case Hn:n.mode=16195;case 16195:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),0===h)break t;r.set(a.subarray(i,i+h),s),o-=h,i+=h,l-=h,s+=h,n.length-=h;break}n.mode=Pn;break;case 16196:for(;u<14;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Wn;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}n.lens[E[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[E[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,$={bits:n.lenbits},k=Nn(0,n.lens,0,19,n.lencode,0,n.work,$),n.lenbits=$.bits,k){t.msg="invalid code lengths set",n.mode=Wn;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[c&(1<<n.lenbits)-1],g=A>>>24,m=A>>>16&255,b=65535&A,!(g<=u);){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(b<16)c>>>=g,u-=g,n.lens[n.have++]=b;else{if(16===b){for(M=g+2;u<M;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=Wn;break}x=n.lens[n.have-1],h=3+(3&c),c>>>=2,u-=2}else if(17===b){for(M=g+3;u<M;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}c>>>=g,u-=g,x=0,h=3+(7&c),c>>>=3,u-=3}else{for(M=g+7;u<M;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}c>>>=g,u-=g,x=0,h=11+(127&c),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Wn;break}for(;h--;)n.lens[n.have++]=x}}if(n.mode===Wn)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Wn;break}if(n.lenbits=9,$={bits:n.lenbits},k=Nn(1,n.lens,0,n.nlen,n.lencode,0,n.work,$),n.lenbits=$.bits,k){t.msg="invalid literal/lengths set",n.mode=Wn;break}if(n.distbits=6,n.distcode=n.distdyn,$={bits:n.distbits},k=Nn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,$),n.distbits=$.bits,k){t.msg="invalid distances set",n.mode=Wn;break}if(n.mode=qn,e===Cn)break t;case qn:n.mode=Xn;case Xn:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=i,t.avail_in=o,n.hold=c,n.bits=u,kn(t,f),s=t.next_out,r=t.output,l=t.avail_out,i=t.next_in,a=t.input,o=t.avail_in,c=n.hold,u=n.bits,n.mode===Pn&&(n.back=-1);break}for(n.back=0;A=n.lencode[c&(1<<n.lenbits)-1],g=A>>>24,m=A>>>16&255,b=65535&A,!(g<=u);){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(m&&!(240&m)){for(w=g,y=m,v=b;A=n.lencode[v+((c&(1<<w+y)-1)>>w)],g=A>>>24,m=A>>>16&255,b=65535&A,!(w+g<=u);){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=g,u-=g,n.back+=g,n.length=b,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=Pn;break}if(64&m){t.msg="invalid literal/length code",n.mode=Wn;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(M=n.extra;u<M;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;A=n.distcode[c&(1<<n.distbits)-1],g=A>>>24,m=A>>>16&255,b=65535&A,!(g<=u);){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(!(240&m)){for(w=g,y=m,v=b;A=n.distcode[v+((c&(1<<w+y)-1)>>w)],g=A>>>24,m=A>>>16&255,b=65535&A,!(w+g<=u);){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=g,u-=g,n.back+=g,64&m){t.msg="invalid distance code",n.mode=Wn;break}n.offset=b,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(M=n.extra;u<M;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Wn;break}n.mode=16204;case 16204:if(0===l)break t;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Wn;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),_=n.window}else _=r,p=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{r[s++]=_[p++]}while(--h);0===n.length&&(n.mode=Xn);break;case 16205:if(0===l)break t;r[s++]=n.length,l--,n.mode=Xn;break;case Kn:if(n.wrap){for(;u<32;){if(0===o)break t;o--,c|=a[i++]<<u,u+=8}if(f-=l,t.total_out+=f,n.total+=f,4&n.wrap&&f&&(t.adler=n.check=n.flags?Qt(n.check,r,f,s-f):Gt(n.check,r,f,s-f)),f=l,4&n.wrap&&(n.flags?c:Vn(c))!==n.check){t.msg="incorrect data check",n.mode=Wn;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===o)break t;o--,c+=a[i++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Wn;break}c=0,u=0}n.mode=16208;case 16208:k=Dn;break t;case Wn:k=Un;break t;case 16210:return Ln;default:return Zn}return t.next_out=s,t.avail_out=l,t.next_in=i,t.avail_in=o,n.hold=c,n.bits=u,(n.wsize||f!==t.avail_out&&n.mode<Wn&&(n.mode<Kn||e!==Sn))&&oa(t,t.output,t.next_out,f-t.avail_out),d-=t.avail_in,f-=t.avail_out,t.total_in+=d,t.total_out+=f,n.total+=f,4&n.wrap&&f&&(t.adler=n.check=n.flags?Qt(n.check,r,f,t.next_out-f):Gt(n.check,r,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Pn?128:0)+(n.mode===qn||n.mode===Hn?256:0),(0===d&&0===f||e===Sn)&&k===Tn&&(k=In),k},ca={inflateReset:ta,inflateReset2:ea,inflateResetKeep:Qn,inflateInit:t=>na(t,15),inflateInit2:na,inflate:la,inflateEnd:t=>{if(Jn(t))return Zn;let e=t.state;return e.window&&(e.window=null),t.state=null,Tn},inflateGetHeader:(t,e)=>{if(Jn(t))return Zn;const n=t.state;return 2&n.wrap?(n.head=e,e.done=!1,Tn):Zn},inflateSetDictionary:(t,e)=>{const n=e.length;let a,r,i;return Jn(t)?Zn:(a=t.state,0!==a.wrap&&a.mode!==Bn?Zn:a.mode===Bn&&(r=1,r=Gt(r,e,n,0),r!==a.check)?Un:(i=oa(t,e,n,n),i?(a.mode=16210,Ln):(a.havedict=1,Tn)))},inflateInfo:"pako inflate (from Nodeca project)"};var ua=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const da=Object.prototype.toString,{Z_NO_FLUSH:fa,Z_FINISH:ha,Z_OK:pa,Z_STREAM_END:_a,Z_NEED_DICT:ga,Z_STREAM_ERROR:ma,Z_DATA_ERROR:ba,Z_MEM_ERROR:wa}=ee;function ya(t){this.options=en.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sn,this.strm.avail_out=0;let n=ca.inflateInit2(this.strm,e.windowBits);if(n!==pa)throw new Error(te[n]);if(this.header=new ua,ca.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=rn.string2buf(e.dictionary):"[object ArrayBuffer]"===da.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=ca.inflateSetDictionary(this.strm,e.dictionary),n!==pa)))throw new Error(te[n])}function va(t,e){const n=new ya(e);if(n.push(t),n.err)throw n.msg||te[n.err];return n.result}ya.prototype.push=function(t,e){const n=this.strm,a=this.options.chunkSize,r=this.options.dictionary;let i,s,o;if(this.ended)return!1;for(s=e===~~e?e:!0===e?ha:fa,"[object ArrayBuffer]"===da.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),i=ca.inflate(n,s),i===ga&&r&&(i=ca.inflateSetDictionary(n,r),i===pa?i=ca.inflate(n,s):i===ba&&(i=ga));n.avail_in>0&&i===_a&&n.state.wrap>0&&0!==t[n.next_in];)ca.inflateReset(n),i=ca.inflate(n,s);switch(i){case ma:case ba:case ga:case wa:return this.onEnd(i),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||i===_a))if("string"===this.options.to){let t=rn.utf8border(n.output,n.next_out),e=n.next_out-t,r=rn.buf2string(n.output,t);n.next_out=e,n.avail_out=a-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==pa||0!==o){if(i===_a)return i=ca.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ya.prototype.onData=function(t){this.chunks.push(t)},ya.prototype.onEnd=function(t){t===pa&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=en.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var xa=function(t,e){return(e=e||{}).raw=!0,va(t,e)},ka={Inflate:ya,inflate:va,inflateRaw:xa,ungzip:va,constants:ee};const{Deflate:Aa,deflate:za,deflateRaw:$a,gzip:Ma}=vn,{Inflate:Ea,inflate:Na,inflateRaw:Sa,ungzip:Ra}=ka;var Ca={Deflate:Aa,deflate:za,deflateRaw:$a,gzip:Ma,Inflate:Ea,inflate:Na,inflateRaw:Sa,ungzip:Ra,constants:ee};const Ta="prod"===document.documentElement.dataset.environment,Da={isProd:Ta,dataFilePrefix:"./data/",dataFileSuffix:".json"+(Ta?".gz":""),minYear:2e3,maxYear:2043,initialYear:2022,animationDuration:1e3},{dataFilePrefix:Oa,dataFileSuffix:Za}=Da;function Ua(t){return`${Oa}${t}${Za}`}const La=Da.isProd,Ia={headers:{"Content-Type":"application/json","Content-Encoding":La?"gzip":"json"}},Fa=new TextDecoder;async function ja(t){const e=Ua(t);let n;try{const t=await fetch(e,Ia);if(La){const e=await t.arrayBuffer(),a=Ca.inflate(e);n=JSON.parse(Fa.decode(a))}else n=await t.json();return n}catch(t){return console.error(t),[]}}const Ba=new Map;async function Pa(){(await ja("codes")).map((function(t){const{code:e,name:n}=t,a={code:e,name:n};return a.pyramidFile=`pyramid/${e}`,a.lineChartsFile=`line-charts/${e}`,a.histogramsFile=`histograms/${e}`,a})).forEach((function(t){Ba.set(t.code,t)}))}let Ya,Ha,qa;async function Xa(){[Ya,Ha]=await Promise.all([ja("variants"),ja("assumptions")])}async function Ka(){[qa]=await Promise.all([ja("pods")])}function Wa(...t){return Object.assign({},...t)}const Va=t=>null===t?"":t;function Ga(t){return Object.entries(t).reduce((function(t,[e,n]){return t[e]=n(null),t}),{})}function Ja(t,e){return function(n){const a=new Set;return Object.keys(t).forEach((function(r){if(!Object.hasOwn(n,r))return;const i=n[r],s=e[r](i);s!==t[r]&&(t[r]=s,a.add(r))})),a}}function Qa(t){const e=t.node();return function(t,n){const a=new CustomEvent(t,{detail:n});e.dispatchEvent(a)}}let tr,er,nr;const ar={area:Va,variant:Va,year:t=>null===t?NaN:parseInt(t),refYear:t=>null===t?null:parseInt(t),animating:t=>!!t};var rr='<div class="pyramid-content">\r\n  <div class="titles-container">\r\n    <h3></h3>\r\n    <p></p>\r\n  </div>\r\n\r\n  <div class="controls-container">\r\n    <div class="dropdowns">\r\n      <div class="area-select">\r\n        <label><span>Choose an area</span> <input /></label>\r\n        <ul></ul>\r\n      </div>\r\n      <label><span>Choose a variant</span> <select class="variant-select"></select></label>\r\n    </div>\r\n    <label><input type="checkbox" /> Lock age structure</label>\r\n  </div>\r\n\r\n  <div class="graphic-container">\r\n    <div class="main-graphic">\r\n      <svg></svg>\r\n    </div>\r\n    <div class="mini-graphic">\r\n      <svg></svg>\r\n    </div>\r\n    <div class="play-pause-container">\r\n      <button class="play-button" aria-label="Play pyramid animation">\r\n        <svg width="50px" height="50px" viewBox="0 0 50 50">\r\n          <g>\r\n            <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z" id="play" style="opacity: 1;"></path>\r\n          </g>\r\n        </svg>\r\n      </button>\r\n      <button class="pause-button" aria-label="Pause pyramid animation">\r\n        <svg width="50px" height="50px" viewBox="0 0 50 50">\r\n          <g>\r\n            <path d="M18 32h4V16h-4v16zm6-28C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm2-8h4V16h-4v16z">\r\n          </g>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="slider-container">\r\n    <input type="range" orient="vertical" list="pyramid-year-list" aria-label="year" />\r\n    <datalist id="pyramid-year-list">\r\n      <option value="2000">2000</option>\r\n      <option value="2005">2005</option>\r\n      <option value="2010">2010</option>\r\n      <option value="2015">2015</option>\r\n      <option value="2020">2020</option>\r\n      <option value="2025">2025</option>\r\n      <option value="2030">2030</option>\r\n      <option value="2035">2035</option>\r\n      <option value="2040">2040</option>\r\n    </datalist>\r\n    <div class="slider-labels" aria-hidden="true"></div>\r\n  </div>\r\n\r\n  <div class="data-container">\r\n\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>Age</th>\r\n          <th>Persons</th>\r\n          <th>Pct</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody></tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <th>Total</th>\r\n          <td></td>\r\n          <td></td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n\r\n    <div class="dependency-ratios">\r\n      <div>\r\n        <p>Young-age dependency ratio: <span class="dr-no"></span></p>\r\n      </div>\r\n      <div class="dr-space">\r\n        <p class="dr-def">The number of persons aged 17 or younger per 100 persons of working-age.</p>\r\n      </div>\r\n      <div>\r\n        <p>Old-age dependency ratio: <span class="dr-no"></span></p>\r\n      </div>\r\n      <div>\r\n        <p class="dr-def">The number of persons aged 65 or older per 100 persons of working-age.</p>\r\n      </div>\r\n    </div>\r\n\r\n    <dl>\r\n      <div>\r\n        <dt class="caption">Assumptions:</dt>\r\n        <dd></dd>\r\n      </div>\r\n      <div>\r\n        <dt>Average completed family size, mid-2043:</dt>\r\n        <dd></dd>\r\n      </div>\r\n      <div>\r\n        <dt>Life expectancy at birth, mid-2043:</dt>\r\n        <dd></dd>\r\n      </div>\r\n      <div>\r\n        <dt>Long-term net international migration:</dt>\r\n        <dd></dd>\r\n      </div>\r\n    </dl>\r\n\r\n    <div class="links">\r\n      <p><a class="download-link" download>\r\n        <span class="download-btn">Download population data (JSON)</span>\r\n      </a></p>\r\n       </div>\r\n  </div>\r\n</div>';function ir(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sr(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function or(t){let e,n,a;function r(t,a,r=0,i=t.length){if(r<i){if(0!==e(a,a))return i;do{const e=r+i>>>1;n(t[e],a)<0?r=e+1:i=e}while(r<i)}return r}return 2!==t.length?(e=ir,n=(e,n)=>ir(t(e),n),a=(e,n)=>t(e)-n):(e=t===ir||t===sr?t:lr,n=t,a=t),{left:r,center:function(t,e,n=0,i=t.length){const s=r(t,e,n,i-1);return s>n&&a(t[s-1],e)>-a(t[s],e)?s-1:s},right:function(t,a,r=0,i=t.length){if(r<i){if(0!==e(a,a))return i;do{const e=r+i>>>1;n(t[e],a)<=0?r=e+1:i=e}while(r<i)}return r}}}function lr(){return 0}const cr=or(ir).right;or((function(t){return null===t?NaN:+t})).center;const ur=Math.sqrt(50),dr=Math.sqrt(10),fr=Math.sqrt(2);function hr(t,e,n){const a=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(a)),i=a/Math.pow(10,r),s=i>=ur?10:i>=dr?5:i>=fr?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/s,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*s,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?hr(t,e,2*n):[o,l,c]}function pr(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const a=e<t,[r,i,s]=a?hr(e,t,n):hr(t,e,n);if(!(i>=r))return[];const o=i-r+1,l=new Array(o);if(a)if(s<0)for(let t=0;t<o;++t)l[t]=(i-t)/-s;else for(let t=0;t<o;++t)l[t]=(i-t)*s;else if(s<0)for(let t=0;t<o;++t)l[t]=(r+t)/-s;else for(let t=0;t<o;++t)l[t]=(r+t)*s;return l}function _r(t,e,n){return hr(t=+t,e=+e,n=+n)[2]}function gr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function mr(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}function br(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wr(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function yr(){}var vr=.7,xr=1/vr,kr="\\s*([+-]?\\d+)\\s*",Ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$r=/^#([0-9a-f]{3,8})$/,Mr=new RegExp(`^rgb\\(${kr},${kr},${kr}\\)$`),Er=new RegExp(`^rgb\\(${zr},${zr},${zr}\\)$`),Nr=new RegExp(`^rgba\\(${kr},${kr},${kr},${Ar}\\)$`),Sr=new RegExp(`^rgba\\(${zr},${zr},${zr},${Ar}\\)$`),Rr=new RegExp(`^hsl\\(${Ar},${zr},${zr}\\)$`),Cr=new RegExp(`^hsla\\(${Ar},${zr},${zr},${Ar}\\)$`),Tr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Dr(){return this.rgb().formatHex()}function Or(){return this.rgb().formatRgb()}function Zr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$r.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ur(e):3===n?new Fr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Lr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Lr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Mr.exec(t))?new Fr(e[1],e[2],e[3],1):(e=Er.exec(t))?new Fr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Nr.exec(t))?Lr(e[1],e[2],e[3],e[4]):(e=Sr.exec(t))?Lr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Rr.exec(t))?qr(e[1],e[2]/100,e[3]/100,1):(e=Cr.exec(t))?qr(e[1],e[2]/100,e[3]/100,e[4]):Tr.hasOwnProperty(t)?Ur(Tr[t]):"transparent"===t?new Fr(NaN,NaN,NaN,0):null}function Ur(t){return new Fr(t>>16&255,t>>8&255,255&t,1)}function Lr(t,e,n,a){return a<=0&&(t=e=n=NaN),new Fr(t,e,n,a)}function Ir(t,e,n,a){return 1===arguments.length?((r=t)instanceof yr||(r=Zr(r)),r?new Fr((r=r.rgb()).r,r.g,r.b,r.opacity):new Fr):new Fr(t,e,n,null==a?1:a);var r}function Fr(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}function jr(){return`#${Hr(this.r)}${Hr(this.g)}${Hr(this.b)}`}function Br(){const t=Pr(this.opacity);return`${1===t?"rgb(":"rgba("}${Yr(this.r)}, ${Yr(this.g)}, ${Yr(this.b)}${1===t?")":`, ${t})`}`}function Pr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hr(t){return((t=Yr(t))<16?"0":"")+t.toString(16)}function qr(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Kr(t,e,n,a)}function Xr(t){if(t instanceof Kr)return new Kr(t.h,t.s,t.l,t.opacity);if(t instanceof yr||(t=Zr(t)),!t)return new Kr;if(t instanceof Kr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,a=t.b/255,r=Math.min(e,n,a),i=Math.max(e,n,a),s=NaN,o=i-r,l=(i+r)/2;return o?(s=e===i?(n-a)/o+6*(n<a):n===i?(a-e)/o+2:(e-n)/o+4,o/=l<.5?i+r:2-i-r,s*=60):o=l>0&&l<1?0:s,new Kr(s,o,l,t.opacity)}function Kr(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}function Wr(t){return(t=(t||0)%360)<0?t+360:t}function Vr(t){return Math.max(0,Math.min(1,t||0))}function Gr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}br(yr,Zr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Dr,formatHex:Dr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Xr(this).formatHsl()},formatRgb:Or,toString:Or}),br(Fr,Ir,wr(yr,{brighter(t){return t=null==t?xr:Math.pow(xr,t),new Fr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?vr:Math.pow(vr,t),new Fr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Fr(Yr(this.r),Yr(this.g),Yr(this.b),Pr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jr,formatHex:jr,formatHex8:function(){return`#${Hr(this.r)}${Hr(this.g)}${Hr(this.b)}${Hr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Br,toString:Br})),br(Kr,(function(t,e,n,a){return 1===arguments.length?Xr(t):new Kr(t,e,n,null==a?1:a)}),wr(yr,{brighter(t){return t=null==t?xr:Math.pow(xr,t),new Kr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?vr:Math.pow(vr,t),new Kr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,r=2*n-a;return new Fr(Gr(t>=240?t-240:t+120,r,a),Gr(t,r,a),Gr(t<120?t+240:t-120,r,a),this.opacity)},clamp(){return new Kr(Wr(this.h),Vr(this.s),Vr(this.l),Pr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Pr(this.opacity);return`${1===t?"hsl(":"hsla("}${Wr(this.h)}, ${100*Vr(this.s)}%, ${100*Vr(this.l)}%${1===t?")":`, ${t})`}`}}));var Jr=t=>()=>t;function Qr(t){return 1==(t=+t)?ti:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}(e,n,t):Jr(isNaN(e)?n:e)}}function ti(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Jr(isNaN(t)?e:t)}var ei=function t(e){var n=Qr(e);function a(t,e){var a=n((t=Ir(t)).r,(e=Ir(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),s=ti(t.opacity,e.opacity);return function(e){return t.r=a(e),t.g=r(e),t.b=i(e),t.opacity=s(e),t+""}}return a.gamma=t,a}(1);function ni(t,e){e||(e=[]);var n,a=t?Math.min(e.length,t.length):0,r=e.slice();return function(i){for(n=0;n<a;++n)r[n]=t[n]*(1-i)+e[n]*i;return r}}function ai(t,e){var n,a=e?e.length:0,r=t?Math.min(a,t.length):0,i=new Array(r),s=new Array(a);for(n=0;n<r;++n)i[n]=ui(t[n],e[n]);for(;n<a;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=i[n](t);return s}}function ri(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function ii(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function si(t,e){var n,a={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?a[n]=ui(t[n],e[n]):r[n]=e[n];return function(t){for(n in a)r[n]=a[n](t);return r}}var oi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,li=new RegExp(oi.source,"g");function ci(t,e){var n,a,r,i=oi.lastIndex=li.lastIndex=0,s=-1,o=[],l=[];for(t+="",e+="";(n=oi.exec(t))&&(a=li.exec(e));)(r=a.index)>i&&(r=e.slice(i,r),o[s]?o[s]+=r:o[++s]=r),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,l.push({i:s,x:ii(n,a)})),i=li.lastIndex;return i<e.length&&(r=e.slice(i),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,a=0;a<e;++a)o[(n=l[a]).i]=n.x(t);return o.join("")})}function ui(t,e){var n,a=typeof e;return null==e||"boolean"===a?Jr(e):("number"===a?ii:"string"===a?(n=Zr(e))?(e=n,ei):ci:e instanceof Zr?ei:e instanceof Date?ri:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?ni:Array.isArray(e)?ai:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?si:ii)(t,e)}function di(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var fi,hi=180/Math.PI,pi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _i(t,e,n,a,r,i){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*a)&&(n-=t*l,a-=e*l),(o=Math.sqrt(n*n+a*a))&&(n/=o,a/=o,l/=o),t*a<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*hi,skewX:Math.atan(l)*hi,scaleX:s,scaleY:o}}function gi(t,e,n,a){function r(t){return t.length?t.pop()+" ":""}return function(i,s){var o=[],l=[];return i=t(i),s=t(s),function(t,a,r,i,s,o){if(t!==r||a!==i){var l=s.push("translate(",null,e,null,n);o.push({i:l-4,x:ii(t,r)},{i:l-2,x:ii(a,i)})}else(r||i)&&s.push("translate("+r+e+i+n)}(i.translateX,i.translateY,s.translateX,s.translateY,o,l),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(r(n)+"rotate(",null,a)-2,x:ii(t,e)})):e&&n.push(r(n)+"rotate("+e+a)}(i.rotate,s.rotate,o,l),function(t,e,n,i){t!==e?i.push({i:n.push(r(n)+"skewX(",null,a)-2,x:ii(t,e)}):e&&n.push(r(n)+"skewX("+e+a)}(i.skewX,s.skewX,o,l),function(t,e,n,a,i,s){if(t!==n||e!==a){var o=i.push(r(i)+"scale(",null,",",null,")");s.push({i:o-4,x:ii(t,n)},{i:o-2,x:ii(e,a)})}else 1===n&&1===a||i.push(r(i)+"scale("+n+","+a+")")}(i.scaleX,i.scaleY,s.scaleX,s.scaleY,o,l),i=s=null,function(t){for(var e,n=-1,a=l.length;++n<a;)o[(e=l[n]).i]=e.x(t);return o.join("")}}}var mi=gi((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?pi:_i(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),bi=gi((function(t){return null==t?pi:(fi||(fi=document.createElementNS("http://www.w3.org/2000/svg","g")),fi.setAttribute("transform",t),(t=fi.transform.baseVal.consolidate())?_i((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):pi)}),", ",")",")");function wi(t){return+t}var yi=[0,1];function vi(t){return t}function xi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function ki(t,e,n){var a=t[0],r=t[1],i=e[0],s=e[1];return r<a?(a=xi(r,a),i=n(s,i)):(a=xi(a,r),i=n(i,s)),function(t){return i(a(t))}}function Ai(t,e,n){var a=Math.min(t.length,e.length)-1,r=new Array(a),i=new Array(a),s=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<a;)r[s]=xi(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(e){var n=cr(t,e,1,a)-1;return i[n](r[n](e))}}function zi(){var t,e,n,a,r,i,s=yi,o=yi,l=ui,c=vi;function u(){var t,e,n,l=Math.min(s.length,o.length);return c!==vi&&(t=s[0],e=s[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),a=l>2?Ai:ki,r=i=null,d}function d(e){return null==e||isNaN(e=+e)?n:(r||(r=a(s.map(t),o,l)))(t(c(e)))}return d.invert=function(n){return c(e((i||(i=a(o,s.map(t),ii)))(n)))},d.domain=function(t){return arguments.length?(s=Array.from(t,wi),u()):s.slice()},d.range=function(t){return arguments.length?(o=Array.from(t),u()):o.slice()},d.rangeRound=function(t){return o=Array.from(t),l=di,u()},d.clamp=function(t){return arguments.length?(c=!!t||vi,u()):c!==vi},d.interpolate=function(t){return arguments.length?(l=t,u()):l},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,a){return t=n,e=a,u()}}function $i(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function Mi(t){return(t=$i(Math.abs(t)))?t[1]:NaN}var Ei,Ni=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Si(t){if(!(e=Ni.exec(t)))throw new Error("invalid format: "+t);var e;return new Ri({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ri(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ci(t,e){var n=$i(t,e);if(!n)return t+"";var a=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+a:a.length>r+1?a.slice(0,r+1)+"."+a.slice(r+1):a+new Array(r-a.length+2).join("0")}Si.prototype=Ri.prototype,Ri.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ti={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ci(100*t,e),r:Ci,s:function(t,e){var n=$i(t,e);if(!n)return t+"";var a=n[0],r=n[1],i=r-(Ei=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=a.length;return i===s?a:i>s?a+new Array(i-s+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+$i(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Di(t){return t}var Oi,Zi,Ui,Li=Array.prototype.map,Ii=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Fi(t){var e,n,a=void 0===t.grouping||void 0===t.thousands?Di:(e=Li.call(t.grouping,Number),n=t.thousands+"",function(t,a){for(var r=t.length,i=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>a&&(o=Math.max(1,a-l)),i.push(t.substring(r-=o,r+o)),!((l+=o+1)>a));)o=e[s=(s+1)%e.length];return i.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Di:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Li.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Si(t)).fill,n=t.align,d=t.sign,f=t.symbol,h=t.zero,p=t.width,_=t.comma,g=t.precision,m=t.trim,b=t.type;"n"===b?(_=!0,b="g"):Ti[b]||(void 0===g&&(g=12),m=!0,b="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var w="$"===f?r:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===f?i:/[%p]/.test(b)?l:"",v=Ti[b],x=/[defgprs%]/.test(b);function k(t){var r,i,l,f=w,k=y;if("c"===b)k=v(t)+k,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:v(Math.abs(t),g),m&&(t=function(t){t:for(var e,n=t.length,a=1,r=-1;a<n;++a)switch(t[a]){case".":r=e=a;break;case"0":0===r&&(r=a),e=a;break;default:if(!+t[a])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==d&&(A=!1),f=(A?"("===d?d:c:"-"===d||"("===d?"":d)+f,k=("s"===b?Ii[8+Ei/3]:"")+k+(A&&"("===d?")":""),x)for(r=-1,i=t.length;++r<i;)if(48>(l=t.charCodeAt(r))||l>57){k=(46===l?s+t.slice(r+1):t.slice(r))+k,t=t.slice(0,r);break}}_&&!h&&(t=a(t,1/0));var z=f.length+t.length+k.length,$=z<p?new Array(p-z+1).join(e):"";switch(_&&h&&(t=a($+t,$.length?p-k.length:1/0),$=""),n){case"<":t=f+t+k+$;break;case"=":t=f+$+t+k;break;case"^":t=$.slice(0,z=$.length>>1)+f+t+k+$.slice(z);break;default:t=$+f+t+k}return o(t)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:d,formatPrefix:function(t,e){var n=d(((t=Si(t)).type="f",t)),a=3*Math.max(-8,Math.min(8,Math.floor(Mi(e)/3))),r=Math.pow(10,-a),i=Ii[8+a/3];return function(t){return n(r*t)+i}}}}function ji(t,e,n,a){var r,i=function(t,e,n){n=+n;const a=(e=+e)<(t=+t),r=a?_r(e,t,n):_r(t,e,n);return(a?-1:1)*(r<0?1/-r:r)}(t,e,n);switch((a=Si(null==a?",f":a)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=a.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Mi(e)/3)))-Mi(Math.abs(t)))}(i,s))||(a.precision=r),Ui(a,s);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Mi(e)-Mi(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(a.precision=r-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(r=function(t){return Math.max(0,-Mi(Math.abs(t)))}(i))||(a.precision=r-2*("%"===a.type))}return Zi(a)}function Bi(t){var e=t.domain;return t.ticks=function(t){var n=e();return pr(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var a=e();return ji(a[0],a[a.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var a,r,i=e(),s=0,o=i.length-1,l=i[s],c=i[o],u=10;for(c<l&&(r=l,l=c,c=r,r=s,s=o,o=r);u-- >0;){if((r=_r(l,c,n))===a)return i[s]=l,i[o]=c,e(i);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}a=r}return t},t}function Pi(){var t=zi()(vi,vi);return t.copy=function(){return e=t,Pi().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},gr.apply(t,arguments),Bi(t)}Oi=Fi({thousands:",",grouping:[3],currency:["$",""]}),Zi=Oi.format,Ui=Oi.formatPrefix;var Yi={value:()=>{}};function Hi(){for(var t,e=0,n=arguments.length,a={};e<n;++e){if(!(t=arguments[e]+"")||t in a||/[\s.]/.test(t))throw new Error("illegal type: "+t);a[t]=[]}return new qi(a)}function qi(t){this._=t}function Xi(t,e){for(var n,a=0,r=t.length;a<r;++a)if((n=t[a]).name===e)return n.value}function Ki(t,e,n){for(var a=0,r=t.length;a<r;++a)if(t[a].name===e){t[a]=Yi,t=t.slice(0,a).concat(t.slice(a+1));break}return null!=n&&t.push({name:e,value:n}),t}qi.prototype=Hi.prototype={constructor:qi,on:function(t,e){var n,a,r=this._,i=(a=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!a.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=Ki(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Ki(r[n],t.name,null);return this}for(;++s<o;)if((n=(t=i[s]).type)&&(n=Xi(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new qi(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,a,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(a=this._[t]).length;i<n;++i)a[i].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)}};var Wi,Vi,Gi=0,Ji=0,Qi=0,ts=1e3,es=0,ns=0,as=0,rs="object"==typeof performance&&performance.now?performance:Date,is="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ss(){return ns||(is(os),ns=rs.now()+as)}function os(){ns=0}function ls(){this._call=this._time=this._next=null}function cs(t,e,n){var a=new ls;return a.restart(t,e,n),a}function us(){ns=(es=rs.now())+as,Gi=Ji=0;try{!function(){ss(),++Gi;for(var t,e=Wi;e;)(t=ns-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gi}()}finally{Gi=0,function(){var t,e,n=Wi,a=1/0;for(;n;)n._call?(a>n._time&&(a=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Wi=e);Vi=t,fs(a)}(),ns=0}}function ds(){var t=rs.now(),e=t-es;e>ts&&(as-=e,es=t)}function fs(t){Gi||(Ji&&(Ji=clearTimeout(Ji)),t-ns>24?(t<1/0&&(Ji=setTimeout(us,t-rs.now()-as)),Qi&&(Qi=clearInterval(Qi))):(Qi||(es=rs.now(),Qi=setInterval(ds,ts)),Gi=1,is(us)))}function hs(t,e,n){var a=new ls;return e=null==e?0:+e,a.restart((n=>{a.stop(),t(n+e)}),e,n),a}ls.prototype=cs.prototype={constructor:ls,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ss():+n)+(null==e?0:+e),this._next||Vi===this||(Vi?Vi._next=this:Wi=this,Vi=this),this._call=t,this._time=n,fs()},stop:function(){this._call&&(this._call=null,this._time=1/0,fs())}};var ps=Hi("start","end","cancel","interrupt"),_s=[],gs=0,ms=1,bs=2,ws=3,ys=4,vs=5,xs=6;function ks(t,e,n,a,r,i){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var a,r=t.__transition;function i(t){n.state=ms,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(i){var c,u,d,f;if(n.state!==ms)return l();for(c in r)if((f=r[c]).name===n.name){if(f.state===ws)return hs(s);f.state===ys?(f.state=xs,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[c]):+c<e&&(f.state=xs,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[c])}if(hs((function(){n.state===ws&&(n.state=ys,n.timer.restart(o,n.delay,n.time),o(i))})),n.state=bs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bs){for(n.state=ws,a=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(a[++u]=f);a.length=u+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=vs,1),i=-1,s=a.length;++i<s;)a[i].call(t,r);n.state===vs&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var a in n.state=xs,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=cs(i,0,n.time)}(t,n,{name:e,index:a,group:r,on:ps,tween:_s,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:gs})}function As(t,e){var n=$s(t,e);if(n.state>gs)throw new Error("too late; already scheduled");return n}function zs(t,e){var n=$s(t,e);if(n.state>ws)throw new Error("too late; already running");return n}function $s(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ms(t,e){var n,a;return function(){var r=zs(this,t),i=r.tween;if(i!==n)for(var s=0,o=(a=n=i).length;s<o;++s)if(a[s].name===e){(a=a.slice()).splice(s,1);break}r.tween=a}}function Es(t,e,n){var a,r;if("function"!=typeof n)throw new Error;return function(){var i=zs(this,t),s=i.tween;if(s!==a){r=(a=s).slice();for(var o={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=o;break}l===c&&r.push(o)}i.tween=r}}function Ns(t,e,n){var a=t._id;return t.each((function(){var t=zs(this,a);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return $s(t,a).value[e]}}function Ss(t,e){var n;return("number"==typeof e?ii:e instanceof Zr?ei:(n=Zr(e))?(e=n,ei):ci)(t,e)}function Rs(t){return function(){this.removeAttribute(t)}}function Cs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ts(t,e,n){var a,r,i=n+"";return function(){var s=this.getAttribute(t);return s===i?null:s===a?r:r=e(a=s,n)}}function Ds(t,e,n){var a,r,i=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===a?r:r=e(a=s,n)}}function Os(t,e,n){var a,r,i;return function(){var s,o,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(o=l+"")?null:s===a&&o===r?i:(r=o,i=e(a=s,l));this.removeAttribute(t)}}function Zs(t,e,n){var a,r,i;return function(){var s,o,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(o=l+"")?null:s===a&&o===r?i:(r=o,i=e(a=s,l));this.removeAttributeNS(t.space,t.local)}}function Us(t,e){var n,a;function r(){var r=e.apply(this,arguments);return r!==a&&(n=(a=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,r)),n}return r._value=e,r}function Ls(t,e){var n,a;function r(){var r=e.apply(this,arguments);return r!==a&&(n=(a=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,r)),n}return r._value=e,r}function Is(t,e){return function(){As(this,t).delay=+e.apply(this,arguments)}}function Fs(t,e){return e=+e,function(){As(this,t).delay=e}}function js(t,e){return function(){zs(this,t).duration=+e.apply(this,arguments)}}function Bs(t,e){return e=+e,function(){zs(this,t).duration=e}}var Ps=dt.prototype.constructor;function Ys(t){return function(){this.style.removeProperty(t)}}var Hs=0;function qs(t,e,n,a){this._groups=t,this._parents=e,this._name=n,this._id=a}function Xs(){return++Hs}var Ks=dt.prototype;qs.prototype={constructor:qs,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=o(t));for(var a=this._groups,r=a.length,i=new Array(r),s=0;s<r;++s)for(var l,c,u=a[s],d=u.length,f=i[s]=new Array(d),h=0;h<d;++h)(l=u[h])&&(c=t.call(l,l.__data__,h,u))&&("__data__"in l&&(c.__data__=l.__data__),f[h]=c,ks(f[h],e,n,h,f,$s(l,n)));return new qs(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=c(t));for(var a=this._groups,r=a.length,i=[],s=[],o=0;o<r;++o)for(var l,u=a[o],d=u.length,f=0;f<d;++f)if(l=u[f]){for(var h,p=t.call(l,l.__data__,f,u),_=$s(l,n),g=0,m=p.length;g<m;++g)(h=p[g])&&ks(h,e,n,g,p,_);i.push(p),s.push(l)}return new qs(i,s,e,n)},selectChild:Ks.selectChild,selectChildren:Ks.selectChildren,filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var i,s=e[r],o=s.length,l=a[r]=[],c=0;c<o;++c)(i=s[c])&&t.call(i,i.__data__,c,s)&&l.push(i);return new qs(a,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,a=e.length,r=n.length,i=Math.min(a,r),s=new Array(a),o=0;o<i;++o)for(var l,c=e[o],u=n[o],d=c.length,f=s[o]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(f[h]=l);for(;o<a;++o)s[o]=e[o];return new qs(s,this._parents,this._name,this._id)},selection:function(){return new Ps(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Xs(),a=this._groups,r=a.length,i=0;i<r;++i)for(var s,o=a[i],l=o.length,c=0;c<l;++c)if(s=o[c]){var u=$s(s,e);ks(s,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new qs(a,this._parents,t,n)},call:Ks.call,nodes:Ks.nodes,node:Ks.node,size:Ks.size,empty:Ks.empty,each:Ks.each,on:function(t,e){var n=this._id;return arguments.length<2?$s(this.node(),n).on.on(t):this.each(function(t,e,n){var a,r,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?As:zs;return function(){var s=i(this,t),o=s.on;o!==a&&(r=(a=o).copy()).on(e,n),s.on=r}}(n,t,e))},attr:function(t,e){var a=n(t),r="transform"===a?bi:Ss;return this.attrTween(t,"function"==typeof e?(a.local?Zs:Os)(a,r,Ns(this,"attr."+t,e)):null==e?(a.local?Cs:Rs)(a):(a.local?Ds:Ts)(a,r,e))},attrTween:function(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var r=n(t);return this.tween(a,(r.local?Us:Ls)(r,e))},style:function(t,e,n){var a="transform"==(t+="")?mi:Ss;return null==e?this.styleTween(t,function(t,e){var n,a,r;return function(){var i=D(this,t),s=(this.style.removeProperty(t),D(this,t));return i===s?null:i===n&&s===a?r:r=e(n=i,a=s)}}(t,a)).on("end.style."+t,Ys(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var a,r,i;return function(){var s=D(this,t),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(t),l=o=D(this,t)),s===l?null:s===a&&l===r?i:(r=l,i=e(a=s,o))}}(t,a,Ns(this,"style."+t,e))).each(function(t,e){var n,a,r,i,s="style."+e,o="end."+s;return function(){var l=zs(this,t),c=l.on,u=null==l.value[s]?i||(i=Ys(e)):void 0;c===n&&r===u||(a=(n=c).copy()).on(o,r=u),l.on=a}}(this._id,t)):this.styleTween(t,function(t,e,n){var a,r,i=n+"";return function(){var s=D(this,t);return s===i?null:s===a?r:r=e(a=s,n)}}(t,a,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var a="style."+(t+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;return this.tween(a,function(t,e,n){var a,r;function i(){var i=e.apply(this,arguments);return i!==r&&(a=(r=i)&&function(t,e,n){return function(a){this.style.setProperty(t,e.call(this,a),n)}}(t,i,n)),a}return i._value=e,i}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ns(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function a(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&function(t){return function(e){this.textContent=t.call(this,e)}}(a)),e}return a._value=t,a}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var a,r=$s(this.node(),n).tween,i=0,s=r.length;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((null==e?Ms:Es)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Is:Fs)(e,t)):$s(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?js:Bs)(e,t)):$s(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){zs(this,t).ease=e}}(e,t)):$s(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;zs(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,a=n._id,r=n.size();return new Promise((function(i,s){var o={value:s},l={value:function(){0==--r&&i()}};n.each((function(){var n=zs(this,a),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),n.on=e})),0===r&&i()}))},[Symbol.iterator]:Ks[Symbol.iterator]};var Ws={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Vs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Gs(t){const e=t.node();return function(t,n=parseFloat){const a=getComputedStyle(e).getPropertyValue(`--${t}`);return n?n(a):a}}function Js(t,e){return t.append("g").attr("class",e)}function Qs(t,e){return e.map((function(e){return Js(t,e)}))}dt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,a,r,i=t.__transition,s=!0;if(i){for(r in e=null==e?null:e+"",i)(n=i[r]).name===e?(a=n.state>bs&&n.state<vs,n.state=xs,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[r]):s=!1;s&&delete t.__transition}}(this,t)}))},dt.prototype.transition=function(t){var e,n;t instanceof qs?(e=t._id,t=t._name):(e=Xs(),(n=Ws).time=ss(),t=null==t?null:t+"");for(var a=this._groups,r=a.length,i=0;i<r;++i)for(var s,o=a[i],l=o.length,c=0;c<l;++c)(s=o[c])&&ks(s,t,e,c,o,n||Vs(s,e));return new qs(a,this._parents,t,e)};const to=Zi(","),eo=t=>t?`${to(t/1e3)}k`:"0";function no(t){const e=t.select(".graphic-container"),n=Gs(e),a=n("width"),r=n("height"),i={top:n("margin-top"),right:n("margin-right"),bottom:n("margin-bottom"),left:n("margin-left"),xMidWidth:n("x-mid-width")},s=(a-(i.left+i.xMidWidth+i.right))/2,o=n("tick-height"),l=e.select(".main-graphic svg").attr("width",a).attr("height",r).attr("viewBox",`0 0 ${a} ${r}`),[c,u,d,f,h,p]=Qs(l,["age-structure","axes","data","grids","ref-year","yob-labels"]);c.append("text").attr("dominant-baseline","hanging").text("Age structure");const _=c.append("text").attr("dominant-baseline","hanging").attr("class","big-year"),g=Js(u,"x-axes"),m=function(t,e){const n=Js(g,`axis, x-axis, ${t}`).attr("text-anchor","middle");Js(n,"ticks");const a=Js(f,`grid ${t}`);let r,i;n.append("text").attr("class","axis-title").attr("dominant-baseline","auto").append("tspan").attr("dx",s/2+"px").attr("dy","-0.25em").text(e);const l={update:function(e){if(e===r)return;r=e;const l=[0,e],c="left"===t?[s,0]:[0,s];i=Pi().domain(l).range(c).nice();const u=i.ticks(5),d=u[u.length-1]>1e4?eo:to;n.select(".ticks").text("").selectAll("g").data(u).enter().append("g").style("transform",(t=>`translateX(${i(t)}px)`)).each((function(t){const e=ft(this);e.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",o),e.append("text").attr("dominant-baseline","hanging").text(d(t))}));const f=b.range();a.text("").selectAll("line.grid-line").data(u).enter().append("line").attr("class","grid-line").attr("x1",(t=>i(t))).attr("y1",f[0]).attr("x2",(t=>i(t))).attr("y2",f[1])}};return Object.defineProperty(l,"scale",{get:()=>i}),l},b=Pi().domain([0,101]).range([r-i.bottom,i.top]),w=m("left","Men"),y=m("right","Women");!function(){const t=pr(0,100,20),e=i.left+s+i.xMidWidth/2;Js(u,"axis, y-axis").style("transform",`translateX(${e}px)`).attr("text-anchor","middle").selectAll("text").data(t).enter().append("text").attr("dominant-baseline","auto").text((t=>`${t}${100===t?"+":""}`)).attr("x",0).attr("y",(t=>b(t))).attr("dy","0.1em")}();let v=null,x=null;return function(){const t=tr("year");_.text(t);const e=tr("animating")?Da.animationDuration:0;w.update(nr("max")),y.update(nr("max"));e&&x>t&&(d.text(""),p.text(""));const n=Math.abs(b(1)-b(0)),a=d.selectAll("g.bar-group").data(nr("year").data,(t=>t.yob));a.exit().each((function(t){p.select(`.${t.yobClass}`).remove()})).transition().duration(e).style("transform",(t=>`translateY(${b(t.age+2)}px)`)).each((function(){const t=ft(this);t.selectAll("g.males rect").transition().duration(e).attr("x",w.scale(0)).attr("width",0),t.selectAll("g.females rect").transition().duration(e).attr("width",0)})).remove();const r=a.enter().append("g").attr("class","bar-group").each((function(t){const e=`translateY(${b(t.age+1)}px)`,a=ft(this).classed("chosen",(t=>t.yob===v)).style("transform",e);a.selectAll("g.gender").data(["males","females"]).enter().append("g").attr("class",(t=>`gender ${t} ${"males"===t?"left":"right"}`)).each((function(t){const e=ft(this),a=("males"===t?w:y).scale;e.append("rect").datum(t).attr("height",n).attr("width",0).attr("x",a(0)),e.append("rect").datum("min").attr("class","min").attr("height",n).attr("width",0).attr("x",a(0))}));const r=p.append("g").datum(t).attr("class",t.yobClass).classed("chosen",(t=>t.yob===v)).style("transform",e);r.append("g").attr("class","left").append("text").attr("class","large-yob-label").attr("x",w.scale(0)-5).attr("dy","-0.15em").attr("text-anchor","end").text(`Year of birth ${t.yob}`),r.append("g").attr("class","right").append("text").attr("class","large-yob-label").attr("x",y.scale(0)+5).attr("dy","-0.15em").attr("text-anchor","start"),t.yob%5==4&&r.select("g.left").append("text").datum(t.yob).attr("class","small-yob-label").attr("x",w.scale(0)-5).attr("text-anchor","end").attr("dominant-baseline","middle").attr("dy","0.4em").text((t=>t));const i=function(){l.selectAll(".chosen").classed("chosen",!1),a.classed("chosen",!0),r.classed("chosen",!0)};a.on("mouseover",(function(){v||i()})).on("mouseout",(function(){v||(a.classed("chosen",!1),r.classed("chosen",!1))})).on("click",(function(){v!==t.yob?(v=t.yob,i()):v=null}))}));a.merge(r).each((function(t){const n=ft(this),a={males:t.m,females:t.f,min:Math.min(t.m,t.f)},r=w.scale,i=y.scale,s=`translateY(${b(t.age+1)}px)`;n.transition().duration(e).style("transform",s);const o=p.select(`.labels-${t.yob}`);o.transition().duration(e).style("transform",s),o.select(".right text").text(`${Zi(",")(Math.round(t.m+t.f))} people`),n.selectAll("g.males rect").transition().duration(e).attr("x",(t=>r(a[t]))).attr("width",(t=>r(0)-r(a[t]))),n.selectAll("g.females rect").transition().duration(e).attr("x",i(0)).attr("width",(t=>i(a[t])-i(0)))})),p.selectAll('[class^="labels-"]').sort((function(t,e){return e.yob-t.yob}));if(tr("refYear")){const t=nr("refYear"),e=[{side:"left",xScale:w.scale,data:t.m},{side:"right",xScale:y.scale,data:t.f}],n=h.selectAll("g").data(e),a=n.enter().append("g").attr("class",(t=>t.side)).each((function(){ft(this).append("polyline")}));n.merge(a).each((function({xScale:t,data:e}){const n=e.map((function({total:e,age:n}){return[t(e),b(n)].join(",")})).join(" ");ft(this).select("polyline").attr("points",n)}))}else h.selectAll("g").data([]).exit().remove();x=t}}let ao=0;function ro(t,e){const n={},a=t.select(".area-select");a.empty()||(n.area=function(t,e){const n="instance"+ao++,a=`pyramid-select-${n}`,r=t.select("input").attr("aria-controls",a),i=t.select("ul").attr("id",a),s=Array.from(Ba.values()),o=function(){t.classed("open",!0),r.attr("aria-expanded",!0)},l=function(){d.includes(document.activeElement)&&r.node().focus(),t.classed("open",!1),r.attr("aria-expanded",!1),h()},c=()=>t.classed("open"),u=i.selectAll("li").data(s).enter().append("li").attr("data-index",((t,e)=>e)).attr("tabIndex",-1).each((function(){ft(this).append("span").text((t=>t.name))})).on("mouseover focus",(function(){const t=parseInt(this.dataset.index);h(t);const e=this.parentElement.clientWidth,n=this.children[0],a=n.offsetWidth,r=Math.max(0,a-e);r&&ft(n).style("transform",`translateX(-${r+8}px)`)})).on("mouseout blur",(function(){ft(this.children[0]).style("transform","")})).on("mousedown",(function(){r.node().focus(),_()})),d=u.nodes();t.on("focusout",(function({relatedTarget:t}){t===r.node||d.includes(t)||(l(),_())})),ft(window).on(`keydown.${n}`,(function(t){const e=t.key,n=t.target,a=d.indexOf(n);n!==r.node()&&-1===a||("ArrowUp"!==e&&"ArrowDown"!==e||(t.preventDefault(),t.stopImmediatePropagation()),n!==r.node()?"Enter"===e?_():"ArrowUp"===e?0===a?r.node().focus():d[a-1].focus():"ArrowDown"===e&&a<d.length-1&&d[a+1].focus():"ArrowUp"===e?c()&&l():"ArrowDown"===e&&(c()?u.filter(".best-match").node().focus():o()))}));const f=function(t){const e=t.map((t=>t.toLowerCase()));let n=0;const a=t=>e.findIndex((e=>e===t)),r=t=>e.findIndex((e=>e.startsWith(t))),i=t=>e.findIndex((e=>e.includes(t))),s=()=>n;return function(t){const e=t.toLowerCase(),o=[a,r,i,s].reverse();let l=-1;for(;-1===l;)l=o.pop()(e);return n=l,n}}(s.map((t=>t.name))),h=function(t){void 0===t&&(t=f(r.property("value")));const e=ft(".best-match"),n=ft(d[t]),a=e.node()!==n.node();return a&&u.classed("best-match",((e,n)=>n===t)),{chosen:n,isNewMatch:a,index:t}},p=function(){const t=u.filter(".best-match").node()||u.node(),e=s[t.dataset.index],n=e.code;r.property("value",e.name),r.attr("data-code",n)};h(0),p();const _=function(){p(),l(),e({area:r.attr("data-code")})};return r.on("focus",o).on("blur",(function({relatedTarget:t}){d.includes(t)||l()})).on("click",o).on("input",(function(){o();const{chosen:t,isNewMatch:e}=h();e&&(i.node().scrollTop=t.node().offsetTop)})),r.attr("data-code")}(a,e));const r=t.select(".pod-select");r.empty()||(n.pod=function(t,e){return t.on("change",(t=>e({pod:t.target.value}))).selectAll("option").data(Array.from(Object.entries(qa))).enter().append("option").attr("value",(t=>t[0])).text((t=>t[1].name)),t.node().value}(r,e));const i=t.select(".horizon-select");i.empty()||(n.horizon=function(t,e){return t.on("change",(t=>e({horizon:t.target.value}))),t.selectAll("option").data([2025,2030,2035,2040]).enter().append("option").attr("value",(t=>t)).text((t=>t)),t.node().value}(i,e));const s=t.select(".variant-select");return s.empty()||(n.variant=function(t,e){return t.on("change",(t=>e({variant:t.target.value}))).selectAll("option").data(Array.from(Object.entries(Ya))).enter().append("option").attr("value",(t=>t[0])).text((t=>t[1].name)),t.node().value}(s,e)),n}function io(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function so(t){const e=ft(t.target).select(".data-container"),n=tr("area"),a=nr("name").toLowerCase().replace(/\s/g,"-");e.select(".download-link").attr("href",Ua(nr("file"))).attr("download",`pyramid-${n}-${a}${Da.dataFileSuffix}`)}function oo(t){const e=ft(t.target).select(".data-container"),n=nr("assumptions");e.select("dl").selectAll("div dd").data(n).each((function(t){const e=ft(this);"string"==typeof t?e.text(t):(e.text(""),e.selectAll("span").data(t).enter().append("span").text((t=>t)))}))}function lo(t){const e=ft(t.target),n=e.select(".titles-container"),a=e.select(".data-container"),r=a.select("table"),i=a.select(".dependency-ratios"),s=nr("name"),o=nr("year").variant;let l,c;if(e.classed("v0","v0"===o),"v0"===o)l=`Population in ${s}`,c="";else{l=`2018 Based Population Projection for ${s}`;const t=Ya[o].name;c=`Variant ${o.slice(1)}: ${t}`}n.select("h3").text(l),n.select("p").text(c);const u=function(){const t=[{name:"under 18",accept:t=>t.age<18,count:0},{name:"1864",accept:t=>t.age>18&&t.age<65,count:0},{name:"65+",accept:t=>t.age>=65,count:0}],{data:e,totals:n}=nr("year");e.forEach((function(e){for(const n of t)if(n.accept(e)){n.count+=e.f+e.m;break}}));const a=n.f+n.m;return t.forEach((t=>t.pct=t.count/a*100)),{bins:t,total:a}}();r.select("tbody").text("").selectAll("tr").data(u.bins.slice()).enter().append("tr").each((function(t){ft(this).append("th").text(t.name),ft(this).selectAll("td").data([io(Math.round(t.count)),`${Math.round(t.pct)}%`]).enter().append("td").text((t=>t))})),r.selectAll("tfoot td").data([io(Math.round(u.total)),"100%"]).text((t=>t)),i.selectAll("p span:not(.help)").data([u.bins[0].count,u.bins[2].count]).text((t=>Math.round(t/u.bins[1].count*100)))}function co(t){!function(t){const e=Ga(ar),n={},a=Qa(t),r=Ja(e,ar);er=function(t){const e=r(t);e.size&&(e.has("area")?i():e.has("variant")?s():e.has("year")&&o(),e.has("refYear")&&l(),e.has("animating")&&c())},tr=function(t){return e[t]},nr=function(t){return n[t]};const i=async function(){const t=Ba.get(e.area);n.name=t.name,n.file=t.pyramidFile,n.area=await ja(n.file),n.max=n.area.map((function(t){const{year:e,data:n}=t;return n.reduce((function(t,n){return n.yob=e-n.age,n.yobClass=`labels-${n.yob}`,Math.max(t,n.m,n.f)}),0)})).reduce(((t,e)=>Math.max(t,e)),0),a("areadatachange"),s()},s=function(){const t=["v0",e.variant];n.variant=n.area.filter((e=>t.includes(e.variant)));const r=Ya[e.variant].short,i=`${Ya[e.variant].name} variant`,s=r.match(/(B|L|M)\d/g);n.assumptions=[i].concat(s.map((t=>Ha[t]))),a("variantdatachange"),o(),null!==e.refYear&&l(),er({animating:!1})},o=function(){n.year=n.variant.find((t=>t.year===e.year)),a("yeardatachange")},l=function(){const t=e.refYear;null===t?n.refYear=null:(n.refYear={m:[],f:[]},n.variant.find((e=>e.year===t)).data.forEach((function(t){for(const e of["m","f"]){const a=n.refYear[e];a.push({age:t.age,total:t[e]}),a.push({age:t.age+1,total:t[e]})}}))),a("refyeardatachange")},c=function(){a("animatingchange")}}(t),t.html(rr);const e=t.select(".controls-container"),n=t.select(".slider-container"),a=t.select(".graphic-container"),r=ro(e,er),i=function(t,e){const n=Da.minYear,a=Da.maxYear,r=Da.initialYear,i=pr(n,a,Math.floor(a-n)/5);t.select('input[type="range"]').attr("min",n).attr("max",a).attr("step",1).attr("value",r).on("input",(t=>e({year:t.target.value}))),t.select("datalist").selectAll("option").data(i).enter().append("option").attr("value",(t=>t.value));const s=Pi().domain([n,a]).range([100,0]);return t.select(".slider-labels").selectAll("span.label").data(i).enter().append("span").attr("class","label").style("transform",(t=>`translateY(calc(${s(t)}cqh - 0.05em))`)).text((t=>t)),r}(n,er),s=n.select('input[type="range"]');e.select("input[type=checkbox]").on("change",(function(t){const e=t.target.checked?s.node().value:null;er({refYear:e})})),a.select(".play-button").on("click",(function(t){er({animating:!0}),t.pointerType||a.select(".pause-button").node().focus()})),a.select(".pause-button").on("click",(function(t){er({animating:!1}),t.pointerType||a.select(".play-button").node().focus()}));const o=no(t),l=function(t){const e=t.select(".graphic-container").select(".mini-graphic"),n=Gs(e),a=n("width"),r=n("height"),i={top:n("margin-top"),right:n("margin-right"),bottom:n("margin-bottom"),left:n("margin-left"),xMidWidth:n("x-mid-width")},s=e.select("svg").attr("width",a).attr("height",r).attr("viewBox",`0 0 ${a} ${r}`),o=Pi().domain([0,101]).range([r-i.bottom,i.top]),l=(a-(i.left+i.xMidWidth+i.right))/2;return function(){const t=tr("refYear");if(e.classed("have-data",null!==t),s.text(""),null===t)return;const n=nr("refYear"),a=[0,nr("max")],r=[{side:"left",range:[l,0],data:n.m},{side:"right",range:[0,l],data:n.f}],[i,c]=Qs(s,["data","ref-year"]);i.selectAll("g").data(r).enter().append("g").attr("class",(t=>t.side)).each((function(t){const e=Pi().domain(a).range(t.range).nice(),n=t.data.map((function({total:t,age:n}){return[e(t),o(n)].join(",")})).join(" ");ft(this).append("polyline").attr("points",n)})),c.append("text").attr("text-anchor","middle").text(t),"v0"!==nr("year").variant&&Js(s,"assumptions").append("text").attr("text-anchor","middle").text(nr("assumptions")[0])}}(t);t.on("areadatachange",so).on("variantdatachange",oo).on("yeardatachange.controls",lo).on("yeardatachange.graphic",o).on("refyeardatachange.graphic",o).on("refyeardatachange.mini-graphic",l).on("animatingchange",(function(){const e=tr("animating");t.classed("animating",e),e?(!function(t){let e=null;const n=function(a){let r=!1;null===e?e=a:r=t(a-e),r||requestAnimationFrame(n)};requestAnimationFrame(n)}(function(){const t=parseInt(s.attr("min")),e=parseInt(s.attr("max"))-t+1,n=parseInt(s.node().value)-t;return function(a){if(!tr("animating"))return!0;const r=Math.floor(a/Da.animationDuration),i=t+(n+r)%e;s.node().value=i,er({year:i})}}()),s.attr("disabled","disabled")):s.attr("disabled",null)}));const c=Wa(r,{year:i,refYear:null,animating:!1});er(c)}function uo(t){return function(){return t}}const fo=Math.PI,ho=2*fo,po=1e-6,_o=ho-po;function go(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class mo{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?go:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return go;const n=10**e;return function(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,a){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,e,n,a,r,i){this._append`C${+t},${+e},${+n},${+a},${this._x1=+r},${this._y1=+i}`}arcTo(t,e,n,a,r){if(t=+t,e=+e,n=+n,a=+a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=this._x1,s=this._y1,o=n-t,l=a-e,c=i-t,u=s-e,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(d>po)if(Math.abs(u*o-l*c)>po&&r){let f=n-i,h=a-s,p=o*o+l*l,_=f*f+h*h,g=Math.sqrt(p),m=Math.sqrt(d),b=r*Math.tan((fo-Math.acos((p+d-_)/(2*g*m)))/2),w=b/m,y=b/g;Math.abs(w-1)>po&&this._append`L${t+w*c},${e+w*u}`,this._append`A${r},${r},0,0,${+(u*f>c*h)},${this._x1=t+y*o},${this._y1=e+y*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,a,r,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),o=n*Math.sin(a),l=t+s,c=e+o,u=1^i,d=i?a-r:r-a;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>po||Math.abs(this._y1-c)>po)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%ho+ho),d>_o?this._append`A${n},${n},0,1,${u},${t-s},${e-o}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>po&&this._append`A${n},${n},0,${+(d>=fo)},${u},${this._x1=t+n*Math.cos(r)},${this._y1=e+n*Math.sin(r)}`)}rect(t,e,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function bo(t){this._context=t}function wo(t){return new bo(t)}function yo(t){return t[0]}function vo(t){return t[1]}function xo(t,e){var n=uo(!0),a=null,r=wo,i=null,s=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new mo(e)}(o);function o(o){var l,c,u,d=(o=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(o)).length,f=!1;for(null==a&&(i=r(u=s())),l=0;l<=d;++l)!(l<d&&n(c=o[l],l,o))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(c,l,o),+e(c,l,o));if(u)return i=null,u+""||null}return t="function"==typeof t?t:void 0===t?yo:uo(t),e="function"==typeof e?e:void 0===e?vo:uo(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:uo(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:uo(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:uo(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=a&&(i=r(a)),o):r},o.context=function(t){return arguments.length?(null==t?a=i=null:i=r(a=t),o):a},o}let ko,Ao,zo;bo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const $o={area:Va,pod:Va,smooth:t=>!!t};function Mo(t,e){return function(n,a){const r=t.selectAll("div.chart-wrapper").data(n,a);r.exit().each((function(){this.removeChart()})),r.enter().append("div").attr("class","chart-wrapper").each((function(){e(this)})),r.each((function(){this.updateChart()}))}}const Eo=Zi(","),No=[0,100],So=Da.animationDuration,Ro=function(t,e){const n=`${"male"===e?"m":"f"}${ko("smooth")?"s":""}`;return t.data.map((t=>({x:t.age,y:1e3*t[n]})))};var Co='<style>\r\n.download {\r\n  display: flex;\r\n}\r\n</style>\r\n\r\n<div class="controls-container">\r\n  <div class="dropdowns">\r\n    <div class="area-select">\r\n      <label><span>Choose an area</span> <input /></label>\r\n      <ul></ul>\r\n    </div>\r\n    <label><span>Choose a service type</span> <select class="pod-select"></select></label>\r\n  </div>\r\n  <label><input type="checkbox" /> Smooth the relationship between utilisation and age</label>\r\n</div>\r\n\r\n<div class="graphic-container"></div>\r\n\r\n<div class="links">\r\n  <p class="download"><a class="download-link" download>\r\n    <span class="download-btn">Download activity data (JSON)</span>\r\n  </a></p>\r\n</div>\r\n';function To(t){!function(t){const e=Ga($o),n={},a=Qa(t),r=Ja(e,$o);Ao=function(t){const e=r(t);e.size&&(e.has("area")?i():e.has("pod")?s():e.has("smooth")&&o())},ko=function(t){return e[t]},zo=function(t){return n[t]};const i=async function(){const t=Ba.get(e.area);n.name=t.name,n.file=t.lineChartsFile,n.area=await ja(n.file),a("areadatachange"),s()},s=function(){n.pod=n.area.filter((t=>t.pod===e.pod)),a("poddatachange")},o=function(){a("smoothchange")}}(t),t.html(Co);const e=t.select(".controls-container"),n=ro(e,Ao),a=e.select("input[type=checkbox]").on("change",(function(t){Ao({smooth:t.target.checked})})),r=t.select(".links"),i=function(t){const e=t.select(".graphic-container"),n=Gs(e),a=n("width"),r=n("height"),i=n("margin-top"),s=n("margin-right"),o=n("margin-bottom"),l=n("margin-left"),c=n("tick-height"),u=[0,a-(l+s)],d=[r-(o+i),0],f=Pi().domain(No).range(u),h=function(t){return Pi().domain([0,t]).range(d).nice()},p=function(t){return 1e3*function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let a=-1;for(let r of t)null!=(r=e(r,++a,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}(t.data,(t=>Math.max(t.f,t.m,t.fs,t.ms)))},_=function(t){const e=ft(this);0!==t&&e.append("line").attr("x1",f(f.domain()[0])).attr("x2",f(f.domain()[1])).attr("y1",0).attr("y2",0).attr("stroke-dasharray","4 4"),e.append("text").attr("dominant-baseline","middle").attr("dx","-0.5em").text(Eo(t))},g=Mo(e,(function(t){const e=ft(t),n=e.datum(),i=e.append("svg").attr("viewBox",`0 0 ${a} ${r}`).attr("class","chart"),[s,o,l]=Qs(i,["axes","data","top-text"]);l.append("text").attr("dominant-baseline","hanging").attr("class","main-title").text(n.label),l.append("text").attr("class","sub").attr("dominant-baseline","hanging").text("Rate per 1,000 person-years"),l.append("text").attr("class","legend-text").selectAll("tspan").data(["Women","|","Men"]).enter().append("tspan").attr("dominant-baseline","hanging").text((t=>t));const[u,d]=Qs(s,["axis x-axis","axis y-axis"]),g=pr(No[0],No[1],5);u.append("line").attr("class","axis-line").attr("x1",f(No[0])).attr("y1",0).attr("x2",f(No[1])).attr("y2",0),Js(u,"ticks").selectAll("g.tick").data(g).enter().append("g").attr("text-anchor","middle").attr("class","tick").style("transform",(t=>`translateX(${f(t)}px)`)).each((function(t){const e=ft(this);e.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",c),e.append("text").attr("dominant-baseline","hanging").text(t)})),u.append("text").attr("class","axis-title").attr("dominant-baseline","auto").attr("dy","-0.5em").append("tspan").attr("dx",f(50)).text("Age");const m=Ro(n,"female"),b=Ro(n,"male"),w=p(n);let y=h(w);const v=y.ticks(5);Js(d,"ticks").selectAll("g.tick").data(v,(t=>t)).enter().append("g").attr("text-anchor","end").attr("class","tick").style("transform",(t=>`translateY(${y(t)}px)`)).style("opacity",1).each(_);const x=xo().x((t=>f(t.x))).y((t=>y(t.y)));o.selectAll("path").data([m,b]).enter().append("path").attr("class",((t,e)=>0===e?"females":"males")).attr("d",x),t.updateChart=function(){const t=y,n=e.datum(),a=p(n);y=h(a);const r=y.ticks(5),i=d.select(".ticks").selectAll("g.tick").data(r,(t=>t));i.exit().transition().duration(So).style("transform",(t=>`translateY(${y(t)}px)`)).style("opacity",0).remove();const s=i.enter().append("g").attr("text-anchor","end").attr("class","tick").style("transform",(e=>`translateY(${t(e)}px)`)).style("opacity",0).each(_);i.merge(s).transition().duration(So).style("transform",(t=>`translateY(${y(t)}px)`)).style("opacity",1);const l=Ro(n,"female"),c=Ro(n,"male");x.y((t=>y(t.y))),o.selectAll("path").data([l,c]).transition().duration(So).attr("d",x)},t.removeChart=function(){e.remove()}}));return function(){const t=zo("pod");g(t,(t=>`${t.pod}-${t.group}`))}}(t);t.on("areadatachange",(function(){const t=zo("name").toLowerCase().replace(/\s/g,"-"),e=ko("area");r.select(".download-link").attr("href",Ua(zo("file"))).attr("download",`line-charts-${e}-${t}${Da.dataFileSuffix}`)})).on("poddatachange",i).on("smoothchange",i);const s=Wa(n,{smooth:a.node().checked});Ao(s)}function Do(t){for(var e=t.length/6|0,n=new Array(e),a=0;a<e;)n[a]="#"+t.slice(6*a,6*++a);return n}function Oo(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Zo=Oo(Do("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));let Uo,Lo,Io;Oo(Do("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Oo(Do("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Oo(Do("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const Fo={area:Va,pod:Va,variant:Va,horizon:t=>null===t?NaN:parseInt(t),noAdjust:t=>!!t};const jo=Da.animationDuration;const Bo=function t(){var e=Bi(function(){var t,e,n,a,r,i=0,s=1,o=vi,l=!1;function c(e){return null==e||isNaN(e=+e)?r:o(0===n?.5:(e=(a(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function u(t){return function(e){var n,a;return arguments.length?([n,a]=e,o=t(n,a),c):[o(0),o(1)]}}return c.domain=function(r){return arguments.length?([i,s]=r,t=a(i=+i),e=a(s=+s),n=t===e?0:1/(e-t),c):[i,s]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(o=t,c):o},c.range=u(ui),c.rangeRound=u(di),c.unknown=function(t){return arguments.length?(r=t,c):r},function(r){return a=r,t=r(i),e=r(s),n=t===e?0:1/(e-t),c}}()(vi));return e.copy=function(){return n=e,t().domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown());var n},mr.apply(e,arguments)}((t=>Zo(1-t))).domain([0,80]);var Po='<div class="controls-container">\r\n  <div class="dropdowns">\r\n    <div class="area-select">\r\n      <label><span>Choose an area</span> <input /></label>\r\n      <ul></ul>\r\n    </div>\r\n    <label><span>Choose a service type</span> <select class="pod-select"></select></label>\r\n    <label><span>Choose a model horizon</span> <select class="horizon-select"></select></label>\r\n    <label><span>Choose a variant</span> <select class="variant-select"></select></label>\r\n  </div>\r\n  <label><input type="checkbox" /> Show modelled change without adjustment for health-status</label>\r\n</div>\r\n\r\n<div class="graphic-container"></div>\r\n\r\n<div class="links">\r\n  <p class="download"><a class="download-link" download>\r\n    <span class="download-btn">Download model results (JSON)</span>\r\n  </a></p>\r\n</div>';function Yo(t){!function(t){const e=Ga(Fo),n={},a=Qa(t),r=Ja(e,Fo);Lo=function(t){const e=r(t);e.size&&(e.has("area")?i():e.has("pod")?s():e.has("horizon")?o():e.has("variant")&&l(),e.has("noAdjust")&&c())},Uo=function(t){return e[t]},Io=function(t){return n[t]};const i=async function(){const t=Ba.get(e.area);n.name=t.name,n.file=t.histogramsFile,n.area=await ja(n.file),a("areadatachange"),s()},s=function(){n.pod=n.area.filter((t=>t.pod===e.pod)),a("poddatachange"),o()},o=function(){n.horizon=n.pod.filter((t=>t.end_year===e.horizon)),a("horizondatachange"),l()},l=function(){n.variant=n.horizon.filter((t=>t.variant===e.variant)),a("variantdatachange")},c=function(){a("noadjustchange")}}(t),t.html(Po);const e=t.select(".controls-container"),n=ro(e,Lo),a=e.select("input[type=checkbox]").on("change",(function(t){Lo({noAdjust:t.target.checked})})),r=t.select(".links"),i=function(t){const e=t.select(".graphic-container"),n=Gs(e),a=n("width"),r=n("height"),i=n("margin-top"),s=n("margin-right"),o=n("margin-bottom"),l=n("margin-left"),c=n("tick-height"),u=[0,a-(l+s)],d=[r-(o+i),0],f=Pi().domain([0,1]).range(d),h=function(t){const e=function(t){const e=t.data;return[0,e[e.length-1].x1]}(t);return Pi().domain(e).range(u).nice()},p=function(t){const e=t.domain();return pr(e[0],e[1],5)},_=Mo(e,(function(t){const e=ft(t),n=e.datum(),i=e.append("svg").attr("viewBox",`0 0 ${a} ${r}`).attr("class","chart"),[s,o,l,u]=Qs(i,["axes","data","no-adjust","top-text"]);u.append("text").attr("class","main-title").attr("dominant-baseline","hanging").text(n.label),u.append("text").attr("class","sub").attr("dominant-baseline","hanging").text("Per cent change");const[d]=Qs(s,["axis x-axis"]);let _=h(n);const g=_.domain(),m=function(t){const e=ft(this);e.append("line").attr("y2",c),e.append("text").attr("dominant-baseline","hanging").text(t)},b=p(_);d.append("line").attr("class","axis-line").attr("x1",_(g[0])).attr("x2",_(g[1])),Js(d,"ticks").selectAll("g.tick").data(b).enter().append("g").attr("text-anchor","middle").attr("class","tick").style("transform",(t=>`translateX(${_(t)}px)`)).each(m),o.selectAll("rect").data(n.data).enter().append("rect").attr("x",(t=>_(t.x0))).attr("width",(t=>_(t.x1)-_(t.x0))).attr("y",f(1)).attr("height",f(0)-f(1)).style("fill",(t=>Bo(t.freq))),l.append("circle").attr("cx",_(n.end_p_nohsa)).attr("cy",f(.5)).attr("r",5).attr("fill","red").on("mouseover",(function(){ft(this).classed("hovered",!0)})).on("mouseout",(function(){ft(this).classed("hovered",!1)}));const w=_(n.end_p_nohsa)-60,y=f(.5)+5,v=l.append("g").attr("class","tooltip").style("transform",`translateX(${w}px) translateY(${y}px)`);v.append("rect").attr("width",55).attr("height",27.5),v.append("text").attr("x",27.5).attr("y",13.75).attr("text-anchor","middle").attr("dominant-baseline","middle").text(`${n.end_p_nohsa.toFixed(2)}%`),t.updateChart=function(){const t=_,n=e.datum();_=h(n);const a=p(_),r=d.select(".ticks").selectAll("g.tick").data(a,(t=>t));r.exit().transition().duration(jo).style("transform",(t=>`translateX(${_(t)}px)`)).style("opacity",0).remove();const i=r.enter().append("g").attr("text-anchor","middle").attr("class","tick").style("transform",(e=>`translateX(${t(e)}px)`)).style("opacity",0).each(m);r.merge(i).transition().duration(jo).style("transform",(t=>`translateX(${_(t)}px)`)).style("opacity",1);const s=o.selectAll("rect").data(n.data);s.exit().transition().duration(jo).attr("x",(t=>_(t.x0))).attr("width",(t=>_(t.x1)-_(t.x0))).style("opacity",0).remove();const c=s.enter().append("rect").attr("x",(e=>t(e.x0))).attr("width",(e=>t(e.x1)-t(e.x0))).attr("y",f(1)).attr("height",f(0)-f(1)).style("fill",(t=>Bo(t.freq))).style("opacity",0);s.merge(c).transition().duration(jo).attr("x",(t=>_(t.x0))).attr("width",(t=>_(t.x1)-_(t.x0))).style("fill",(t=>Bo(t.freq))).style("opacity",1),l.select("circle").transition().duration(jo).attr("cx",_(n.end_p_nohsa));const u=_(n.end_p_nohsa)-60;l.select("g.tooltip").transition().duration(jo).style("transform",`translateX(${u}px) translateY(${y}px)`),l.select("g.tooltip text").text(`${n.end_p_nohsa.toFixed(2)}%`)},t.removeChart=function(){e.remove()}}));return function(){const t=Io("variant");_(t,(t=>`${t.pod}-${t.label}`))}}(t);t.on("areadatachange",(function(){const t=Io("name").toLowerCase().replace(/\s/g,"-"),e=Uo("area");r.select(".download-link").attr("href",Ua(Io("file"))).attr("download",`histograms-${e}-${t}${Da.dataFileSuffix}`)})).on("variantdatachange",i).on("noadjustchange",(function(){t.classed("no-adjust",Uo("noAdjust"))}));const s=Wa(n,{noAdjust:a.node().checked});Lo(s)}!async function(){await Promise.all([Pa(),Xa(),Ka()]),co(ft("#pyramid")),To(ft("#line-charts")),Yo(ft("#histograms"))}()}();
